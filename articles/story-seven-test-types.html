<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gsDesign2">
<title>Computing spending boundaries in group sequential design • gsDesign2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Computing spending boundaries in group sequential design">
<meta property="og:description" content="gsDesign2">
<meta property="og:image" content="https://merck.github.io/gsDesign2/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gsDesign2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/gsDesign2.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Merck/gsDesign2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Computing spending boundaries in group sequential design</h1>
                        <h4 data-toc-skip class="author">Keaven Anderson
and Yujie Zhao</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Merck/gsDesign2/blob/HEAD/vignettes/articles/story-seven-test-types.Rmd" class="external-link"><code>vignettes/articles/story-seven-test-types.Rmd</code></a></small>
      <div class="d-none name"><code>story-seven-test-types.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsDesign2/">gsDesign2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://keaven.github.io/gsDesign/" class="external-link">gsDesign</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>We compare derivation of different spending bounds using the
gsDesign2 and gsDesign packages. In gsDesign, there are 6 types of
bounds. We demonstrate here how to replicate these using gsDesign2. In
gsDesign2, the <code><a href="../reference/gs_spending_bound.html">gs_spending_bound()</a></code> function can be used to
derive spending boundaries for all group sequential design derivations
and power calculations. We demonstrate with the
<code><a href="../reference/gs_design_ahr.html">gs_design_ahr()</a></code> function here, using designs under
proportional hazards assumptions to compare with
<code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code>. Since the sample size methods differ
between the <code><a href="../reference/gs_design_ahr.html">gsDesign2::gs_design_ahr()</a></code> and
<code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code> functions, we use continuous sample
sizes so that spending bounds (Z-values, nominal <span class="math inline">\(p\)</span>-values, spending) should be identical
except where noted. Indeed, we are able to reproduce bounds to a high
degree of accuracy. Due to the different sample size methods, sample
size and other boundary approximations vary slightly.</p>
<p>We also present a seventh example to implement a futility bound based
on observed hazard ratio as well as a Haybittle-Peto-like efficacy
bound. In particular, the futility bound would be difficult to implement
using the gsDesign package while it is straightforward using
gsDesign2.</p>
<p>For the last two examples, we implement integer sample size and event
counts using the <code><a href="../reference/to_integer.html">to_integer()</a></code> function for the gsDesign2
package and the <code><a href="https://keaven.github.io/gsDesign/reference/toInteger.html" class="external-link">toInteger()</a></code> function for the gsDesign
package. This would generally would be used for all cases other than
when we are comparing package computations as in Examples 1–5.</p>
<p>For all of our examples, we will use the following design
assumptions:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trial_duration</span> <span class="op">&lt;-</span> <span class="fl">36</span> <span class="co"># Planned trial duration</span></span>
<span><span class="va">info_frac</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.35</span>, <span class="fl">.7</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># Information fraction at analyses</span></span>
<span><span class="co"># 16 month planned enrollment with constant rate</span></span>
<span><span class="va">enroll_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_enroll_rate.html">define_enroll_rate</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fl">16</span>, rate <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># Minimum follow-up for gsSurv() (computed)</span></span>
<span><span class="va">minfup</span> <span class="op">&lt;-</span> <span class="va">trial_duration</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">enroll_rate</span><span class="op">$</span><span class="va">duration</span><span class="op">)</span></span>
<span><span class="co"># Failure rates</span></span>
<span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_fail_rate.html">define_fail_rate</a></span><span class="op">(</span></span>
<span>  duration <span class="op">=</span> <span class="cn">Inf</span>, <span class="co"># Single time period, exponential failure</span></span>
<span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">12</span>, <span class="co"># Exponential time-to-event with 12 month median</span></span>
<span>  hr <span class="op">=</span> <span class="fl">.7</span>, <span class="co"># Proportional hazards</span></span>
<span>  dropout_rate <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">.99</span><span class="op">)</span> <span class="op">/</span> <span class="fl">12</span> <span class="co"># 1% dropout rate per year</span></span>
<span><span class="op">)</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Type I error (one-sided)</span></span>
<span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.15</span> <span class="co"># 85% power = 15% Type II error</span></span>
<span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Randomization ratio (experimental / control)</span></span></code></pre></div>
<p>The choice of Type II error of 0.15 corresponding to 85% power is
intentional. This allows for more impactful futility bounds at interim
analyses. Many teams may decide on the more typical 90% power
(<code>beta = .1</code>), but this can make futility bounds less likely
to impact early decisions.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Analogous to the gsDesign package, we look at 6 variations on
combinations of efficacy and futility bounds.</p>
<div class="section level3">
<h3 id="example-1-efficacy-bound-only">Example 1: Efficacy bound only<a class="anchor" aria-label="anchor" href="#example-1-efficacy-bound-only"></a>
</h3>
<p>One-sided design has only an efficacy bound. An easy way to do this
is to use a fixed bound (<code>lower = gs_b</code>) with negative
infinite bounds (<code>lpar = rep(-Inf, 3)</code>); in the summary table
produced, infinite bounds do not appear. The upper bound implements a
spending bound (<code>upper = gs_spending_bound</code>) and the list of
objects provided in <code>upar</code> describe the spending function and
any associated parameters. The only parts of the <code>upar</code> list
used here are <code>sf = gsDesign::sfLDOF</code> to select a Lan-DeMets
spending function that approximates an O’Brien-Fleming bound. The
<code>total_spend = alpha</code> sets the total spending to the targeted
Type I error for the study. The upper bound provides the Type I error
control for the design as it is not specified elsewhere.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">one_sided</span> <span class="op">&lt;-</span> <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for Type II error (power)</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_h1_info"</span>, <span class="co"># Default</span></span>
<span>  <span class="co"># Upper spending bound and corresponding parameter(s)</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  <span class="co"># No lower bound</span></span>
<span>  lower <span class="op">=</span> <span class="va">gs_b</span>, lpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">one_sided</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Efficacy bound only"</span>, subtitle <span class="op">=</span> <span class="st">"alpha-spending"</span><span class="op">)</span></span></code></pre></div>
<div id="dgfxmtvwrx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dgfxmtvwrx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dgfxmtvwrx thead, #dgfxmtvwrx tbody, #dgfxmtvwrx tfoot, #dgfxmtvwrx tr, #dgfxmtvwrx td, #dgfxmtvwrx th {
  border-style: none;
}

#dgfxmtvwrx p {
  margin: 0;
  padding: 0;
}

#dgfxmtvwrx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dgfxmtvwrx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dgfxmtvwrx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dgfxmtvwrx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dgfxmtvwrx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dgfxmtvwrx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dgfxmtvwrx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dgfxmtvwrx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dgfxmtvwrx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dgfxmtvwrx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dgfxmtvwrx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dgfxmtvwrx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dgfxmtvwrx .gt_spanner_row {
  border-bottom-style: hidden;
}

#dgfxmtvwrx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dgfxmtvwrx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dgfxmtvwrx .gt_from_md > :first-child {
  margin-top: 0;
}

#dgfxmtvwrx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dgfxmtvwrx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dgfxmtvwrx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dgfxmtvwrx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dgfxmtvwrx .gt_row_group_first td {
  border-top-width: 2px;
}

#dgfxmtvwrx .gt_row_group_first th {
  border-top-width: 2px;
}

#dgfxmtvwrx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dgfxmtvwrx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dgfxmtvwrx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dgfxmtvwrx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dgfxmtvwrx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dgfxmtvwrx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dgfxmtvwrx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dgfxmtvwrx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dgfxmtvwrx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dgfxmtvwrx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dgfxmtvwrx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dgfxmtvwrx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dgfxmtvwrx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dgfxmtvwrx .gt_left {
  text-align: left;
}

#dgfxmtvwrx .gt_center {
  text-align: center;
}

#dgfxmtvwrx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dgfxmtvwrx .gt_font_normal {
  font-weight: normal;
}

#dgfxmtvwrx .gt_font_bold {
  font-weight: bold;
}

#dgfxmtvwrx .gt_font_italic {
  font-style: italic;
}

#dgfxmtvwrx .gt_super {
  font-size: 65%;
}

#dgfxmtvwrx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dgfxmtvwrx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dgfxmtvwrx .gt_indent_1 {
  text-indent: 5px;
}

#dgfxmtvwrx .gt_indent_2 {
  text-indent: 10px;
}

#dgfxmtvwrx .gt_indent_3 {
  text-indent: 15px;
}

#dgfxmtvwrx .gt_indent_4 {
  text-indent: 20px;
}

#dgfxmtvwrx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>Efficacy bound only</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>alpha-spending</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.4858</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0352</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0073</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7083</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5295</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0074</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">2.00</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0227</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7894</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8500</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.0250</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
</tfoot>
</table>
</div>
<p>Now we check this with <code>gsDesign::gsSurv().</code> As noted
above, sample size and event counts vary slightly from the design
derived using <code><a href="../reference/gs_design_ahr.html">gs_design_ahr()</a></code>. This also results in
slightly different crossing probabilities under the alternate hypothesis
at interim analyses as well as slightly different approximate hazard
ratios required to cross bounds.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oneSided</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, <span class="co"># Precision parameters for computations</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">1</span>, <span class="co"># One-sided bound; efficacy only</span></span>
<span>  <span class="co"># Upper bound parameters</span></span>
<span>  sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span>,</span>
<span><span class="op">)</span></span>
<span><span class="va">oneSided</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128</span></span>
<span><span class="co">#&gt;       N: 356        p (1-sided)   0.0002</span></span>
<span><span class="co">#&gt;  Events: 100       ~HR at bound   0.4852</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0338</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4406</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0073</span></span>
<span><span class="co">#&gt;  Events: 200       ~HR at bound   0.7079</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0074</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5341</span></span>
<span><span class="co">#&gt;        Final                  Z   2.0002</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0227</span></span>
<span><span class="co">#&gt;  Events: 286       ~HR at bound   0.7891</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0250</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500</span></span></code></pre></div>
<p>Comparing Z-value bounds directly we see they are the same through
approximately 6 digits with precision parameters chosen
(<code>r=32</code>, <code>tol=1e-08</code>):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_sided</span><span class="op">$</span><span class="va">bound</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">oneSided</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -1.349247e-07  9.218765e-07  3.515345e-07</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-2-symmetric-2-sided-design">Example 2: Symmetric 2-sided design<a class="anchor" aria-label="anchor" href="#example-2-symmetric-2-sided-design"></a>
</h3>
<p>We now derive a symmetric 2-sided design. This requires use of the
argument <code>h1_spending = FALSE</code> to use <span class="math inline">\(\alpha\)</span>-spending for both the upper and
lower bounds. While the lower bound is labeled as a futility bound in
the table, it would be better termed an efficacy bound for control
better than experimental treatment.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">symmetric</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for power</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_h1_info"</span>, <span class="co"># Default</span></span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  <span class="co"># Symmetric designs use binding bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  h1_spending <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># Use null hypothesis spending for lower bound</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">symmetric</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided Symmetric Design"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Single spending function"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="gzjyrwbdjg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gzjyrwbdjg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gzjyrwbdjg thead, #gzjyrwbdjg tbody, #gzjyrwbdjg tfoot, #gzjyrwbdjg tr, #gzjyrwbdjg td, #gzjyrwbdjg th {
  border-style: none;
}

#gzjyrwbdjg p {
  margin: 0;
  padding: 0;
}

#gzjyrwbdjg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gzjyrwbdjg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gzjyrwbdjg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gzjyrwbdjg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gzjyrwbdjg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzjyrwbdjg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjyrwbdjg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzjyrwbdjg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gzjyrwbdjg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gzjyrwbdjg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gzjyrwbdjg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gzjyrwbdjg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gzjyrwbdjg .gt_spanner_row {
  border-bottom-style: hidden;
}

#gzjyrwbdjg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gzjyrwbdjg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gzjyrwbdjg .gt_from_md > :first-child {
  margin-top: 0;
}

#gzjyrwbdjg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gzjyrwbdjg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gzjyrwbdjg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjyrwbdjg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gzjyrwbdjg .gt_row_group_first td {
  border-top-width: 2px;
}

#gzjyrwbdjg .gt_row_group_first th {
  border-top-width: 2px;
}

#gzjyrwbdjg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjyrwbdjg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gzjyrwbdjg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gzjyrwbdjg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjyrwbdjg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjyrwbdjg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gzjyrwbdjg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gzjyrwbdjg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gzjyrwbdjg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjyrwbdjg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzjyrwbdjg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjyrwbdjg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzjyrwbdjg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjyrwbdjg .gt_left {
  text-align: left;
}

#gzjyrwbdjg .gt_center {
  text-align: center;
}

#gzjyrwbdjg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gzjyrwbdjg .gt_font_normal {
  font-weight: normal;
}

#gzjyrwbdjg .gt_font_bold {
  font-weight: bold;
}

#gzjyrwbdjg .gt_font_italic {
  font-style: italic;
}

#gzjyrwbdjg .gt_super {
  font-size: 65%;
}

#gzjyrwbdjg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gzjyrwbdjg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gzjyrwbdjg .gt_indent_1 {
  text-indent: 5px;
}

#gzjyrwbdjg .gt_indent_2 {
  text-indent: 10px;
}

#gzjyrwbdjg .gt_indent_3 {
  text-indent: 15px;
}

#gzjyrwbdjg .gt_indent_4 {
  text-indent: 20px;
}

#gzjyrwbdjg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided Symmetric Design</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Single spending function</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">-3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.9998</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">2.0584</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0000</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.4858</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0352</td>
<td headers="Analysis: 1 Time: 14.5 N: 356 Event: 100.2 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">-2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.9927</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">1.4118</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.0000</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0074</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0073</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7083</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5295</td>
<td headers="Analysis: 2 Time: 23.3 N: 393.9 Event: 200.4 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0074</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">-2.00</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.9773</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">1.2668</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.0000</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.0250</td>
</tr>
<tr>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">2.00</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0227</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7894</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8500</td>
<td headers="Analysis: 3 Time: 36 N: 393.9 Event: 286.2 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.0250</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
</tfoot>
</table>
</div>
<p>We compare with <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Symmetric</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>    test.type <span class="op">=</span> <span class="fl">2</span>, <span class="co"># Two-sided symmetric bound</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>, r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>    lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>    sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">Symmetric</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy Futility</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128  -3.6128</span></span>
<span><span class="co">#&gt;       N: 356        p (1-sided)   0.0002   0.0002</span></span>
<span><span class="co">#&gt;  Events: 100       ~HR at bound   0.4852   2.0609</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002   0.0002</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0338   0.0000</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4406  -2.4406</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0073   0.0073</span></span>
<span><span class="co">#&gt;  Events: 200       ~HR at bound   0.7079   1.4126</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0074   0.0074</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5341   0.0000</span></span>
<span><span class="co">#&gt;        Final                  Z   2.0002  -2.0002</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0227   0.0227</span></span>
<span><span class="co">#&gt;  Events: 286       ~HR at bound   0.7891   1.2673</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0250   0.0250</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500   0.0000</span></span></code></pre></div>
<p>Comparing Z-value bounds directly, we again see approximately 6
digits of accuracy.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">symmetric</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"upper"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">Symmetric</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -1.349247e-07  9.218765e-07  4.092976e-07</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">symmetric</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"lower"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">Symmetric</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1]  1.349247e-07 -9.218765e-07 -4.092976e-07</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-3-asymmetric-2-sided-design-with-beta-spending-and-binding-futility">Example 3: Asymmetric 2-sided design with <span class="math inline">\(\beta\)</span>-spending and binding futility<a class="anchor" aria-label="anchor" href="#example-3-asymmetric-2-sided-design-with-beta-spending-and-binding-futility"></a>
</h3>
<p>Designs with binding futility bounds are generally not considered
acceptable for Phase 3 trials as Type I error is not controlled if a
futility bound is crossed and the trial continues, a not infrequent
occurrence. A binding futility bound means that Type I error
computations assume that a trial stops when a futility bound is crossed.
If the trial continues after a futility bound has been crossed, Type I
error is no longer controlled with the computed efficacy bound. For a
Phase 2b study, this may be acceptable and results in a slightly smaller
sample size and less stringent efficacy bounds after the first analysis
than a comparable design with a non-binding futility bound presented in
Example 4.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfHSD.html" class="external-link">sfHSD</a></span>, total_spend <span class="op">=</span> <span class="va">beta</span>, param <span class="op">=</span> <span class="op">-</span><span class="fl">.5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_binding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for Type II error and power</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_h1_info"</span>,</span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  <span class="co"># Asymmetric beta-spending design using binding bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  h1_spending <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># Use beta-spending for futility</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_binding</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided asymmetric design with binding futility"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Both alpha- and beta-spending used"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="znrrrpdqln" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#znrrrpdqln table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#znrrrpdqln thead, #znrrrpdqln tbody, #znrrrpdqln tfoot, #znrrrpdqln tr, #znrrrpdqln td, #znrrrpdqln th {
  border-style: none;
}

#znrrrpdqln p {
  margin: 0;
  padding: 0;
}

#znrrrpdqln .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#znrrrpdqln .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#znrrrpdqln .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#znrrrpdqln .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#znrrrpdqln .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#znrrrpdqln .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#znrrrpdqln .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#znrrrpdqln .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#znrrrpdqln .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#znrrrpdqln .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#znrrrpdqln .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#znrrrpdqln .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#znrrrpdqln .gt_spanner_row {
  border-bottom-style: hidden;
}

#znrrrpdqln .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#znrrrpdqln .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#znrrrpdqln .gt_from_md > :first-child {
  margin-top: 0;
}

#znrrrpdqln .gt_from_md > :last-child {
  margin-bottom: 0;
}

#znrrrpdqln .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#znrrrpdqln .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#znrrrpdqln .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#znrrrpdqln .gt_row_group_first td {
  border-top-width: 2px;
}

#znrrrpdqln .gt_row_group_first th {
  border-top-width: 2px;
}

#znrrrpdqln .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#znrrrpdqln .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#znrrrpdqln .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#znrrrpdqln .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#znrrrpdqln .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#znrrrpdqln .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#znrrrpdqln .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#znrrrpdqln .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#znrrrpdqln .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#znrrrpdqln .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#znrrrpdqln .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#znrrrpdqln .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#znrrrpdqln .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#znrrrpdqln .gt_left {
  text-align: left;
}

#znrrrpdqln .gt_center {
  text-align: center;
}

#znrrrpdqln .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#znrrrpdqln .gt_font_normal {
  font-weight: normal;
}

#znrrrpdqln .gt_font_bold {
  font-weight: bold;
}

#znrrrpdqln .gt_font_italic {
  font-style: italic;
}

#znrrrpdqln .gt_super {
  font-size: 65%;
}

#znrrrpdqln .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#znrrrpdqln .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#znrrrpdqln .gt_indent_1 {
  text-indent: 5px;
}

#znrrrpdqln .gt_indent_2 {
  text-indent: 10px;
}

#znrrrpdqln .gt_indent_3 {
  text-indent: 15px;
}

#znrrrpdqln .gt_indent_4 {
  text-indent: 20px;
}

#znrrrpdqln .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided asymmetric design with binding futility</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Both alpha- and beta-spending used</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">0.12</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.4540</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.9779</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0435</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.5460</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.4972</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0400</td>
<td headers="Analysis: 1 Time: 14.5 N: 380 Event: 106.9 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">1.15</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.1243</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.8540</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.0960</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.8861</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0074</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7164</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5621</td>
<td headers="Analysis: 2 Time: 23.3 N: 420.5 Event: 213.9 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0074</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.91</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0282</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.8039</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.1499</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.9740</td>
</tr>
<tr>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.93</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0268</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.8019</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8500</td>
<td headers="Analysis: 3 Time: 36 N: 420.5 Event: 305.5 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.0250</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
</tfoot>
</table>
</div>
<p>We compare with <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asymmetricBinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Two-sided asymmetric bound, binding futility</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>, r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-07</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span>, sfl <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">param</span></span>
<span><span class="op">)</span></span>
<span><span class="va">asymmetricBinding</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy Futility</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128   0.1436</span></span>
<span><span class="co">#&gt;       N: 380        p (1-sided)   0.0002   0.4429</span></span>
<span><span class="co">#&gt;  Events: 107       ~HR at bound   0.4971   0.9726</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002   0.5571</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0387   0.0442</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4382   1.1807</span></span>
<span><span class="co">#&gt;       N: 422        p (1-sided)   0.0074   0.1189</span></span>
<span><span class="co">#&gt;  Events: 214       ~HR at bound   0.7164   0.8509</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0074   0.8913</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5679   0.0969</span></span>
<span><span class="co">#&gt;        Final                  Z   1.9232   1.9232</span></span>
<span><span class="co">#&gt;       N: 422        p (1-sided)   0.0272   0.0272</span></span>
<span><span class="co">#&gt;  Events: 306       ~HR at bound   0.8024   0.8024</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0250   0.9750</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500   0.1500</span></span></code></pre></div>
<p>Comparing Z-value bounds directly, we again see approximately 6
digits of accuracy in spite of needing to relaxing accuracy to
<code>tol = 1e-07</code> in the call to <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv()</a></code> in order
to get convergence.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_binding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"upper"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricBinding</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -1.349247e-07  2.505886e-04  6.494369e-03</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_binding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"lower"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricBinding</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -0.02803415 -0.02670908 -0.01598640</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-4-asymmetric-2-sided-design-with-beta-spending-and-non-binding-futility-bound">Example 4: Asymmetric 2-sided design with <span class="math inline">\(\beta\)</span>-spending and non-binding futility
bound<a class="anchor" aria-label="anchor" href="#example-4-asymmetric-2-sided-design-with-beta-spending-and-non-binding-futility-bound"></a>
</h3>
<p>In the gsDesign package, asymmetric designs with non-binding <span class="math inline">\(\beta\)</span>-spending used for futility are the
default design. The objectives of this type of design include:</p>
<ul>
<li>Meaningful futility bounds to stop a trial early if no treatment
benefit is emerging for the experimental treatment vs. control.</li>
<li>Type I error is controlled even if the trial continues after a
futility bound is crossed.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfHSD.html" class="external-link">sfHSD</a></span>, total_spend <span class="op">=</span> <span class="va">beta</span>, param <span class="op">=</span> <span class="op">-</span><span class="fl">.5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_nonbinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 info for Type II error and power</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_h1_info"</span>, <span class="co"># Default</span></span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  <span class="co"># Asymmetric beta-spending design use binding bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  h1_spending <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># Use beta-spending for futility</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_nonbinding</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided asymmetric design with non-binding futility"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Both alpha- and beta-spending used"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="dqfykhevzz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dqfykhevzz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dqfykhevzz thead, #dqfykhevzz tbody, #dqfykhevzz tfoot, #dqfykhevzz tr, #dqfykhevzz td, #dqfykhevzz th {
  border-style: none;
}

#dqfykhevzz p {
  margin: 0;
  padding: 0;
}

#dqfykhevzz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dqfykhevzz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dqfykhevzz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dqfykhevzz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dqfykhevzz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqfykhevzz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqfykhevzz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqfykhevzz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dqfykhevzz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dqfykhevzz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dqfykhevzz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dqfykhevzz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dqfykhevzz .gt_spanner_row {
  border-bottom-style: hidden;
}

#dqfykhevzz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dqfykhevzz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dqfykhevzz .gt_from_md > :first-child {
  margin-top: 0;
}

#dqfykhevzz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dqfykhevzz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dqfykhevzz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dqfykhevzz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dqfykhevzz .gt_row_group_first td {
  border-top-width: 2px;
}

#dqfykhevzz .gt_row_group_first th {
  border-top-width: 2px;
}

#dqfykhevzz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqfykhevzz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dqfykhevzz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dqfykhevzz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqfykhevzz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqfykhevzz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dqfykhevzz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dqfykhevzz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dqfykhevzz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqfykhevzz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqfykhevzz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqfykhevzz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqfykhevzz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqfykhevzz .gt_left {
  text-align: left;
}

#dqfykhevzz .gt_center {
  text-align: center;
}

#dqfykhevzz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dqfykhevzz .gt_font_normal {
  font-weight: normal;
}

#dqfykhevzz .gt_font_bold {
  font-weight: bold;
}

#dqfykhevzz .gt_font_italic {
  font-style: italic;
}

#dqfykhevzz .gt_super {
  font-size: 65%;
}

#dqfykhevzz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dqfykhevzz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dqfykhevzz .gt_indent_1 {
  text-indent: 5px;
}

#dqfykhevzz .gt_indent_2 {
  text-indent: 10px;
}

#dqfykhevzz .gt_indent_3 {
  text-indent: 15px;
}

#dqfykhevzz .gt_indent_4 {
  text-indent: 20px;
}

#dqfykhevzz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided asymmetric design with non-binding futility</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Both alpha- and beta-spending used</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">0.15</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.4391</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.9714</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0435</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.5609</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.5043</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0433</td>
<td headers="Analysis: 1 Time: 14.5 N: 395.9 Event: 111.4 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">1.21</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.1136</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.8506</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.0960</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.8960</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0073</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7211</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5822</td>
<td headers="Analysis: 2 Time: 23.3 N: 438.1 Event: 222.8 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0073</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.98</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0241</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.8013</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.1499</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.9773</td>
</tr>
<tr>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">2.00</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0227</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7991</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8500</td>
<td headers="Analysis: 3 Time: 36 N: 438.1 Event: 318.3 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> 0.0218</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> Cumulative alpha for final analysis (0.0218) is less than the full alpha (0.025) when the futility bound is non-binding. The smaller value subtracts the probability of crossing a futility bound before crossing an efficacy bound at a later analysis (0.025 - 0.0032 = 0.0218) under the null hypothesis.</td>
    </tr>
</tfoot>
</table>
</div>
<p>We compare with <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asymmetricNonBinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">4</span>, <span class="co"># Two-sided asymmetric bound, non-binding futility</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>, r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span>, sfl <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">param</span></span>
<span><span class="op">)</span></span>
<span><span class="va">asymmetricNonBinding</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy Futility</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128   0.1860</span></span>
<span><span class="co">#&gt;       N: 398        p (1-sided)   0.0002   0.4262</span></span>
<span><span class="co">#&gt;  Events: 112       ~HR at bound   0.5050   0.9654</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002   0.5738</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0424   0.0442</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4406   1.2406</span></span>
<span><span class="co">#&gt;       N: 440        p (1-sided)   0.0073   0.1074</span></span>
<span><span class="co">#&gt;  Events: 224       ~HR at bound   0.7215   0.8471</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0073   0.9020</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5901   0.0969</span></span>
<span><span class="co">#&gt;        Final                  Z   2.0002   2.0002</span></span>
<span><span class="co">#&gt;       N: 440        p (1-sided)   0.0227   0.0227</span></span>
<span><span class="co">#&gt;  Events: 320       ~HR at bound   0.7995   0.7995</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0215   0.9785</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500   0.1500</span></span></code></pre></div>
<p>Comparing Z-value bounds directly, we again see approximately 6
digits of accuracy.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_nonbinding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"upper"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricNonBinding</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -1.349247e-07  9.218765e-07  3.515345e-07</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_nonbinding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"lower"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricNonBinding</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -0.03267431 -0.03311078 -0.02426999</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-5-asymmetric-2-sided-design-with-null-hypothesis-spending-and-binding-futility-bound">Example 5: Asymmetric 2-sided design with null hypothesis spending
and binding futility bound<a class="anchor" aria-label="anchor" href="#example-5-asymmetric-2-sided-design-with-null-hypothesis-spending-and-binding-futility-bound"></a>
</h3>
<p>Now we use null hypothesis probabilities to set futility bounds. The
parameter <code>alpha_star</code> is used to set the total spending for
the futility bound under the null hypothesis. For our example, this is
set to 0.5 which is a 50% probability of crossing the futility bound at
the interim and final analyses combined. The futility bound at the final
analysis really has no role, so we use the <code>test_lower</code>
argument to eliminate this evaluation at the final analysis. This is
arbitrary and largely selected so that the interim futility bounds can
be meaningful tests. In this case, more than a minor trend in favor of
control at the first or second interim will cross a futility bound. This
is less stringent than the <span class="math inline">\(\beta\)</span>-spending bounds previously
described, but still address a potential ethical issue of continuing the
trial when more than a minor trend in favor of control is present.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha_star</span> <span class="op">&lt;-</span> <span class="fl">.5</span></span>
<span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfHSD.html" class="external-link">sfHSD</a></span>, total_spend <span class="op">=</span> <span class="va">alpha_star</span>, param <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_safety_binding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for Type II error</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_info"</span>,</span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  test_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="co"># Asymmetric design use binding bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  h1_spending <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># Use null-spending for futility</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_safety_binding</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided asymmetric safety design with binding futility"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Alpha-spending used for both bounds, asymmetrically"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="fkhzxxuuvo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fkhzxxuuvo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fkhzxxuuvo thead, #fkhzxxuuvo tbody, #fkhzxxuuvo tfoot, #fkhzxxuuvo tr, #fkhzxxuuvo td, #fkhzxxuuvo th {
  border-style: none;
}

#fkhzxxuuvo p {
  margin: 0;
  padding: 0;
}

#fkhzxxuuvo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fkhzxxuuvo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fkhzxxuuvo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fkhzxxuuvo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fkhzxxuuvo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fkhzxxuuvo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkhzxxuuvo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fkhzxxuuvo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fkhzxxuuvo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fkhzxxuuvo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fkhzxxuuvo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fkhzxxuuvo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fkhzxxuuvo .gt_spanner_row {
  border-bottom-style: hidden;
}

#fkhzxxuuvo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fkhzxxuuvo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fkhzxxuuvo .gt_from_md > :first-child {
  margin-top: 0;
}

#fkhzxxuuvo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fkhzxxuuvo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fkhzxxuuvo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fkhzxxuuvo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fkhzxxuuvo .gt_row_group_first td {
  border-top-width: 2px;
}

#fkhzxxuuvo .gt_row_group_first th {
  border-top-width: 2px;
}

#fkhzxxuuvo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkhzxxuuvo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fkhzxxuuvo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fkhzxxuuvo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkhzxxuuvo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkhzxxuuvo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fkhzxxuuvo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fkhzxxuuvo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fkhzxxuuvo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkhzxxuuvo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fkhzxxuuvo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkhzxxuuvo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fkhzxxuuvo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkhzxxuuvo .gt_left {
  text-align: left;
}

#fkhzxxuuvo .gt_center {
  text-align: center;
}

#fkhzxxuuvo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fkhzxxuuvo .gt_font_normal {
  font-weight: normal;
}

#fkhzxxuuvo .gt_font_bold {
  font-weight: bold;
}

#fkhzxxuuvo .gt_font_italic {
  font-style: italic;
}

#fkhzxxuuvo .gt_super {
  font-size: 65%;
}

#fkhzxxuuvo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fkhzxxuuvo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fkhzxxuuvo .gt_indent_1 {
  text-indent: 5px;
}

#fkhzxxuuvo .gt_indent_2 {
  text-indent: 10px;
}

#fkhzxxuuvo .gt_indent_3 {
  text-indent: 15px;
}

#fkhzxxuuvo .gt_indent_4 {
  text-indent: 20px;
}

#fkhzxxuuvo .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided asymmetric safety design with binding futility</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Alpha-spending used for both bounds, asymmetrically</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">-0.73</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.7664</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">1.1561</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0060</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.2336</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.61</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.4863</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0340</td>
<td headers="Analysis: 1 Time: 14.5 N: 359.6 Event: 101.2 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">-0.42</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.6629</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">1.0611</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.0070</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.3982</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.44</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0073</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7087</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5353</td>
<td headers="Analysis: 2 Time: 23.3 N: 397.9 Event: 202.4 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0074</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">2.00</td>
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0229</td>
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7899</td>
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8500</td>
<td headers="Analysis: 3 Time: 36 N: 397.9 Event: 289.1 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.0250</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
</tfoot>
</table>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asymmetricSafetyBinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">5</span>, <span class="co"># Two-sided asymmetric bound, binding futility, H0 futility spending</span></span>
<span>  astar <span class="op">=</span> <span class="va">alpha_star</span>, <span class="co"># Total Type I error spend for futility</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span>, sfl <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">param</span></span>
<span><span class="op">)</span></span>
<span><span class="va">asymmetricSafetyBinding</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy Futility</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128  -0.7271</span></span>
<span><span class="co">#&gt;       N: 356        p (1-sided)   0.0002   0.7664</span></span>
<span><span class="co">#&gt;  Events: 101       ~HR at bound   0.4856   1.1565</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002   0.2336</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0340   0.0060</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4405  -0.4203</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0073   0.6629</span></span>
<span><span class="co">#&gt;  Events: 201       ~HR at bound   0.7082   1.0612</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0074   0.3982</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5353   0.0070</span></span>
<span><span class="co">#&gt;        Final                  Z   1.9979  -0.2531</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0229   0.5999</span></span>
<span><span class="co">#&gt;  Events: 286       ~HR at bound   0.7895   1.0304</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0250   0.5000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500   0.0072</span></span></code></pre></div>
<p>Comparing Z-value bounds directly, we again see approximately 6
digits of accuracy. For <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv()</a></code> this did not require the
alternate arguments for <code>r</code> and <code>tol</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_safety_binding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"upper"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricSafetyBinding</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span></span>
<span><span class="co">#&gt; [1] -1.349247e-07  9.211210e-07  4.185954e-07</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asymmetric_safety_binding</span><span class="op">$</span><span class="va">bound</span>, <span class="va">bound</span> <span class="op">==</span> <span class="st">"lower"</span><span class="op">)</span><span class="op">$</span><span class="va">z</span> <span class="op">-</span> <span class="va">asymmetricSafetyBinding</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">bound</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1]  4.348992e-08 -3.276118e-08</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-6-asymmetric-2-sided-design-with-null-hypothesis-spending-and-non-binding-futility-bound">Example 6: Asymmetric 2-sided design with null hypothesis spending
and non-binding futility bound<a class="anchor" aria-label="anchor" href="#example-6-asymmetric-2-sided-design-with-null-hypothesis-spending-and-non-binding-futility-bound"></a>
</h3>
<p>Again, we would recommend a non-binding bound presented here over the
binding bound in example 5. We again eliminate the final futility bound
using the <code>test_lower</code> argument. Addition, we show how to
eliminate the efficacy bound at interim 1 allowing a team to decide that
it is too early to stop a trial for efficacy without longer-term
data.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="va">alpha</span>, param <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfHSD.html" class="external-link">sfHSD</a></span>, total_spend <span class="op">=</span> <span class="va">alpha_star</span>, param <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_safety_nonbinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for Type II error</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_info"</span>,</span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  test_upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  test_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="co"># Asymmetric design use non-binding bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  h1_spending <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># Use null-spending for futility</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/to_integer.html">to_integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_safety_nonbinding</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided asymmetric safety design with non-binding futility"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Alpha-spending used for both bounds, asymmetrically"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html" class="external-link">tab_footnote</a></span><span class="op">(</span>footnote <span class="op">=</span> <span class="st">"Integer-based sample size and event counts"</span><span class="op">)</span></span></code></pre></div>
<div id="lyltjgiksx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lyltjgiksx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lyltjgiksx thead, #lyltjgiksx tbody, #lyltjgiksx tfoot, #lyltjgiksx tr, #lyltjgiksx td, #lyltjgiksx th {
  border-style: none;
}

#lyltjgiksx p {
  margin: 0;
  padding: 0;
}

#lyltjgiksx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lyltjgiksx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lyltjgiksx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lyltjgiksx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lyltjgiksx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lyltjgiksx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyltjgiksx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lyltjgiksx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lyltjgiksx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lyltjgiksx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lyltjgiksx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lyltjgiksx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lyltjgiksx .gt_spanner_row {
  border-bottom-style: hidden;
}

#lyltjgiksx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lyltjgiksx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lyltjgiksx .gt_from_md > :first-child {
  margin-top: 0;
}

#lyltjgiksx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lyltjgiksx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lyltjgiksx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lyltjgiksx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lyltjgiksx .gt_row_group_first td {
  border-top-width: 2px;
}

#lyltjgiksx .gt_row_group_first th {
  border-top-width: 2px;
}

#lyltjgiksx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyltjgiksx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lyltjgiksx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lyltjgiksx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyltjgiksx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyltjgiksx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lyltjgiksx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lyltjgiksx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lyltjgiksx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyltjgiksx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lyltjgiksx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyltjgiksx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lyltjgiksx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyltjgiksx .gt_left {
  text-align: left;
}

#lyltjgiksx .gt_center {
  text-align: center;
}

#lyltjgiksx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lyltjgiksx .gt_font_normal {
  font-weight: normal;
}

#lyltjgiksx .gt_font_bold {
  font-weight: bold;
}

#lyltjgiksx .gt_font_italic {
  font-style: italic;
}

#lyltjgiksx .gt_super {
  font-size: 65%;
}

#lyltjgiksx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lyltjgiksx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lyltjgiksx .gt_indent_1 {
  text-indent: 5px;
}

#lyltjgiksx .gt_indent_2 {
  text-indent: 10px;
}

#lyltjgiksx .gt_indent_3 {
  text-indent: 15px;
}

#lyltjgiksx .gt_indent_4 {
  text-indent: 20px;
}

#lyltjgiksx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided asymmetric safety design with non-binding futility</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Alpha-spending used for both bounds, asymmetrically</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">1.06</td>
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.1441</td>
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.8095</td>
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.2326</td>
<td headers="Analysis: 1 Time: 14.4 N: 360 Event: 101 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.8559</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.11</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0174</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7430</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.3968</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.9857</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">2.45</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0072</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.7089</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.5028</td>
<td headers="Analysis: 2 Time: 23.1 N: 400 Event: 202 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0064</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">2.00</td>
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0228</td>
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7907</td>
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.5963</td>
<td headers="Analysis: 3 Time: 35.9 N: 400 Event: 290 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> 0.0097</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6"> Integer-based sample size and event counts</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> Cumulative alpha for final analysis (0.0097) is less than the full alpha (0.025) when the futility bound is non-binding. The smaller value subtracts the probability of crossing a futility bound before crossing an efficacy bound at a later analysis (0.025 - 0.0153 = 0.0097) under the null hypothesis.</td>
    </tr>
</tfoot>
</table>
</div>
<p>The corresponding <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsDesign::gsSurv()</a></code> design is not
strictly comparable since the option to eliminate some futility and
efficacy analyses is not enabled.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asymmetricSafetyNonBinding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html" class="external-link">gsSurv</a></span><span class="op">(</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Two-sided asymmetric bound, binding futility, H0 futility spending</span></span>
<span>  astar <span class="op">=</span> <span class="va">alpha_star</span>, <span class="co"># Total Type I error spend for futility</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>, timing <span class="op">=</span> <span class="va">info_frac</span>, T <span class="op">=</span> <span class="va">trial_duration</span>, minfup <span class="op">=</span> <span class="va">minfup</span>, r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  lambdaC <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">fail_rate</span>, eta <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">dropout_rate</span>, hr <span class="op">=</span> <span class="va">fail_rate</span><span class="op">$</span><span class="va">hr</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">upar</span><span class="op">$</span><span class="va">param</span>, sfl <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">lpar</span><span class="op">$</span><span class="va">param</span></span>
<span><span class="op">)</span></span>
<span><span class="va">asymmetricSafetyBinding</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html" class="external-link">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Analysis              Value Efficacy Futility</span></span>
<span><span class="co">#&gt;    IA 1: 35%                  Z   3.6128  -0.7271</span></span>
<span><span class="co">#&gt;       N: 356        p (1-sided)   0.0002   0.7664</span></span>
<span><span class="co">#&gt;  Events: 101       ~HR at bound   0.4856   1.1565</span></span>
<span><span class="co">#&gt;    Month: 14   P(Cross) if HR=1   0.0002   0.2336</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.0340   0.0060</span></span>
<span><span class="co">#&gt;    IA 2: 70%                  Z   2.4405  -0.4203</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0073   0.6629</span></span>
<span><span class="co">#&gt;  Events: 201       ~HR at bound   0.7082   1.0612</span></span>
<span><span class="co">#&gt;    Month: 23   P(Cross) if HR=1   0.0074   0.3982</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.5353   0.0070</span></span>
<span><span class="co">#&gt;        Final                  Z   1.9979  -0.2531</span></span>
<span><span class="co">#&gt;       N: 394        p (1-sided)   0.0229   0.5999</span></span>
<span><span class="co">#&gt;  Events: 286       ~HR at bound   0.7895   1.0304</span></span>
<span><span class="co">#&gt;    Month: 36   P(Cross) if HR=1   0.0250   0.5000</span></span>
<span><span class="co">#&gt;              P(Cross) if HR=0.7   0.8500   0.0072</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-7-alternate-bound-types">Example 7: Alternate bound types<a class="anchor" aria-label="anchor" href="#example-7-alternate-bound-types"></a>
</h3>
<p>We consider two types of alternative boundary computation
approaches.</p>
<ul>
<li>Computing futility bounds based on a hazard ratio.</li>
<li>Computing efficacy bounds with a Haybittle-Peto or a related
Fleming-Harrington-O’Brien approach.</li>
</ul>
<p>We begin with a futility bound. We will consider a non-binding
futility bound as it does not impact the efficacy bound. Assume the
clinical trial team wishes to stop the trial at the first two interim
analyses if a targeted interim hazard ratio is not achieved. This
approach can require a bit of iteration (trial and error) to incorporate
the final design endpoint count; we skip over this iteration here. We
assume we wish to consider stopping for futility if a hazard ratio
greater than 1 and 0.9 are observed at interim analyses 1 and 2 with 104
and 209 events observed, respectively. The final analysis is planned for
300 events.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Targeted events at interim and final analysis</span></span>
<span><span class="co"># This is based on above designs and then adjusted, as necessary</span></span>
<span><span class="va">targeted_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">104</span>, <span class="fl">209</span>, <span class="fl">300</span><span class="op">)</span></span></code></pre></div>
<p>We wish to translate the hazard ratios specified to corresponding
Z-values; this can be done as follows.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interim_futility_z</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu">gsDesign</span><span class="fu">::</span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurvival.html" class="external-link">hrn2z</a></span><span class="op">(</span>hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.9</span><span class="op">)</span>, n <span class="op">=</span> <span class="va">targeted_events</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">interim_futility_z</span></span>
<span><span class="co">#&gt; [1] 0.0000000 0.7615897</span></span></code></pre></div>
<p>We will add a final futility bound of <code>-Inf</code>, indicating
no final futility analysis; this gives us a vector of Z-value bounds for
all analyses. For this type of bound, Type II error will be computed
rather based on bounds rather than the spending approach were bounds are
computed based on specified spending.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lower</span> <span class="op">&lt;-</span> <span class="va">gs_b</span></span>
<span><span class="co"># Allows specifying fixed Z-values for futility</span></span>
<span><span class="co"># Translated HR bounds to Z-value scale</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">interim_futility_z</span>, <span class="op">-</span><span class="cn">Inf</span><span class="op">)</span></span></code></pre></div>
<p>For the efficacy bound, we first consider a Haybittle-Peto fixed
bound for interim analyses. Using a Bonferroni approach, we test at
nominal levels 0.001, 0.001, and 0.023 at the 3 analyses. By not
accounting for correlations, this will actually not quite use all of the
0.025 1-sided Type I error allowed. We allow the user to substitute this
code for what follows to verify this.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upper</span> <span class="op">&lt;-</span> <span class="va">gs_b</span></span>
<span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.001</span>, <span class="fl">.001</span>, <span class="fl">.0023</span><span class="op">)</span>, lower.tail <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The alternative approach is to use a fixed spending approach at each
analysis as suggested by <span class="citation">Fleming, Harrington, and
O’Brien (1984)</span>. Again, with some iteration not shown, we use a
piecewise linear spending function to select interim bounds that match
the desired Haybittle-Peto interim bounds. However, using this approach
a slightly more liberal final bound is achieved that still controls Type
I error.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">upper</span> <span class="op">&lt;-</span> <span class="va">gs_spending_bound</span></span>
<span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLinear.html" class="external-link">sfLinear</a></span>,</span>
<span>  total_spend <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">targeted_events</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="op">/</span> <span class="va">targeted_events</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.001</span>, <span class="fl">.0018</span><span class="op">)</span> <span class="op">/</span> <span class="fl">.025</span><span class="op">)</span>,</span>
<span>  timing <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_fixed_bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>, fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="va">ratio</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  <span class="co"># Information fraction at analyses and trial duration</span></span>
<span>  info_frac <span class="op">=</span> <span class="va">info_frac</span>, analysis_time <span class="op">=</span> <span class="va">trial_duration</span>,</span>
<span>  <span class="co"># Precision parameters for computations</span></span>
<span>  r <span class="op">=</span> <span class="fl">32</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  <span class="co"># Use NULL information for Type I error, H1 information for Type II error</span></span>
<span>  info_scale <span class="op">=</span> <span class="st">"h0_info"</span>,</span>
<span>  <span class="co"># Function and parameter(s) for upper spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">upper</span>, upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">lower</span>, lpar <span class="op">=</span> <span class="va">lpar</span>,</span>
<span>  <span class="co"># Non-binding futility bounds</span></span>
<span>  binding <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/to_integer.html">to_integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asymmetric_fixed_bounds</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gsDesign2</span><span class="fu">::</span><span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2-sided asymmetric safety design with fixed non-binding futility"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Futility bounds computed to approximate HR"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html" class="external-link">tab_footnote</a></span><span class="op">(</span>footnote <span class="op">=</span> <span class="st">"Integer-based sample size and event counts"</span><span class="op">)</span></span></code></pre></div>
<div id="lvyqofyvlo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lvyqofyvlo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lvyqofyvlo thead, #lvyqofyvlo tbody, #lvyqofyvlo tfoot, #lvyqofyvlo tr, #lvyqofyvlo td, #lvyqofyvlo th {
  border-style: none;
}

#lvyqofyvlo p {
  margin: 0;
  padding: 0;
}

#lvyqofyvlo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lvyqofyvlo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lvyqofyvlo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lvyqofyvlo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lvyqofyvlo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lvyqofyvlo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvyqofyvlo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lvyqofyvlo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lvyqofyvlo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lvyqofyvlo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lvyqofyvlo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lvyqofyvlo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lvyqofyvlo .gt_spanner_row {
  border-bottom-style: hidden;
}

#lvyqofyvlo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lvyqofyvlo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lvyqofyvlo .gt_from_md > :first-child {
  margin-top: 0;
}

#lvyqofyvlo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lvyqofyvlo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lvyqofyvlo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lvyqofyvlo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lvyqofyvlo .gt_row_group_first td {
  border-top-width: 2px;
}

#lvyqofyvlo .gt_row_group_first th {
  border-top-width: 2px;
}

#lvyqofyvlo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvyqofyvlo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lvyqofyvlo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lvyqofyvlo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvyqofyvlo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvyqofyvlo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lvyqofyvlo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lvyqofyvlo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lvyqofyvlo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvyqofyvlo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lvyqofyvlo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvyqofyvlo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lvyqofyvlo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvyqofyvlo .gt_left {
  text-align: left;
}

#lvyqofyvlo .gt_center {
  text-align: center;
}

#lvyqofyvlo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lvyqofyvlo .gt_font_normal {
  font-weight: normal;
}

#lvyqofyvlo .gt_font_bold {
  font-weight: bold;
}

#lvyqofyvlo .gt_font_italic {
  font-style: italic;
}

#lvyqofyvlo .gt_super {
  font-size: 65%;
}

#lvyqofyvlo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lvyqofyvlo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lvyqofyvlo .gt_indent_1 {
  text-indent: 5px;
}

#lvyqofyvlo .gt_indent_2 {
  text-indent: 10px;
}

#lvyqofyvlo .gt_indent_3 {
  text-indent: 15px;
}

#lvyqofyvlo .gt_indent_4 {
  text-indent: 20px;
}

#lvyqofyvlo .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>2-sided asymmetric safety design with fixed non-binding futility</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Futility bounds computed to approximate HR</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35">Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">0.00</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.5000</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">1.0000</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0345</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.5000</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.09</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0010</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.5455</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.1018</td>
<td headers="Analysis: 1 Time: 14.4 N: 371.6 Event: 104 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0010</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7">Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">0.76</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.2232</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.9000</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.0566</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.8019</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Z" class="gt_row gt_right">3.10</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Nominal p" class="gt_row gt_right">0.0010</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  ~HR at bound" class="gt_row gt_right">0.6510</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Alternate hypothesis" class="gt_row gt_right">0.3181</td>
<td headers="Analysis: 2 Time: 23.1 N: 414 Event: 209 AHR: 0.7 Information fraction: 0.7  Null hypothesis" class="gt_row gt_right">0.0018</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1">Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.97</td>
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0244</td>
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.7966</td>
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.8520</td>
<td headers="Analysis: 3 Time: 35.8 N: 414 Event: 300 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> 0.0234</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6"> Integer-based sample size and event counts</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> Cumulative alpha for final analysis (0.0234) is less than the full alpha (0.025) when the futility bound is non-binding. The smaller value subtracts the probability of crossing a futility bound before crossing an efficacy bound at a later analysis (0.025 - 0.0016 = 0.0234) under the null hypothesis.</td>
    </tr>
</tfoot>
</table>
</div>
<p>We see that the targeted bounds are achieved with nominal <span class="math inline">\(p\)</span>-values of 0.0001 for each interim
efficacy bound and the targeted hazard ratios at interim futility
bounds. With these methods, trial designers have more control over
design characteristics they may desire. In particular, we note that the
Haybittle-Peto efficacy bounds are less stringent at the first interim
and more stringent at the second interim than corresponding
O’Brien-Fleming-like bounds we computed with the spending approach. This
may or may not be desirable.</p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-fleming1984designs" class="csl-entry">
Fleming, Thomas R, David P Harrington, and Peter C O’Brien. 1984.
<span>“Designs for Group Sequential Tests.”</span> <em>Controlled
Clinical Trials</em> 5 (4): 348–61.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keaven Anderson, Yilong Zhang, Yujie Zhao, Jianxiao Yang, Nan Xiao. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. <br>Copyright © 2024 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p><span></span></p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
