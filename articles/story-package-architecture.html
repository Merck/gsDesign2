<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Overview of package architecture • gsDesign2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Overview of package architecture">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesign2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/gsDesign2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Merck/gsDesign2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Overview of package architecture</h1>
                        <h4 data-toc-skip class="author">John
Blischak</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Merck/gsDesign2/blob/main/vignettes/articles/story-package-architecture.Rmd" class="external-link"><code>vignettes/articles/story-package-architecture.Rmd</code></a></small>
      <div class="d-none name"><code>story-package-architecture.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview-of-package-architecture">Overview of package architecture<a class="anchor" aria-label="anchor" href="#overview-of-package-architecture"></a>
</h2>
<p>The goal of {gsDesign2} is to enable fixed or group sequential design
under non-proportional hazards. When designing a trial, there are a few
key important decisions that affect how the software should behave:</p>
<ul>
<li>Is it a fixed or group sequential design?</li>
<li>Which method to use for testing? For example, average hazard ratio
(ahr) or weighted log rank (wlr)</li>
<li>For a group sequential design, is the futility bound binding or
non-binding?</li>
</ul>
<p>Internally, {gsDesign2} stores the above decisions using multiple
different implementations.</p>
<p>The main functions have the pattern
<code>{fixed,gs}_{design,power}_{method}</code>, where:</p>
<ul>
<li>The prefix indicates if the trial is a fixed (<code>fixed</code>) or
group sequential (<code>gs</code>) design</li>
<li>The middle portion indicates which input information is used to
calculate the trial details:
<ul>
<li>
<code>design</code>: given power and type I error, calculate sample
size and bounds</li>
<li>
<code>power</code>: given sample size, calculate power</li>
</ul>
</li>
<li>The suffix indicates which test method is used, e.g. average hazard
ratio (<code>ahr</code>) or weighted log rank (<code>wlr</code>)</li>
</ul>
<p>Importantly, these characteristics are stored in the output
object.</p>
<ul>
<li>The type of design is specified by the class of the object:
<code>"fixed_design"</code> or <code>"gs_design"</code>
</li>
<li>The method for testing is specified by the list element
<code>design</code>, which contains a string abbreviation of the test
that matches the original function: <code>"ahr"</code>,
<code>"wlr"</code>, etc</li>
<li>The binding status of the futility bound is specified by the
attribute <code>binding</code>, which is either <code>TRUE</code> or
<code>FALSE</code>
</li>
</ul>
<p>Since the only class designation used by the package is
<code>"fixed_design"</code> or <code>"gs_design"</code>, it only
contains S3 methods related to this distinction. Specifically, the
package provides S3 methods for <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>,
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, and <code><a href="../reference/to_integer.html">to_integer()</a></code>. Furthermore, the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> S3 method returns corresponding objects of class
<code>"fixed_design_summary"</code> or <code>"gs_design_summary"</code>,
and the package provides the S3 methods <code><a href="../reference/as_gt.html">as_gt()</a></code> and
<code><a href="../reference/as_rtf.html">as_rtf()</a></code> to convert the summary tables to <a href="https://github.com/rstudio/gt" class="external-link">gt</a> or <a href="https://en.wikipedia.org/wiki/Rich_Text_Format" class="external-link">RTF</a> format,
respectively.</p>
</div>
<div class="section level2">
<h2 id="how-to-query-the-trial-characteristics-from-the-design-object">How to query the trial characteristics from the design object<a class="anchor" aria-label="anchor" href="#how-to-query-the-trial-characteristics-from-the-design-object"></a>
</h2>
<p><strong>Note:</strong> This section is mainly of interest to
potential developers that wish to contribute code. You do not need to be
familiar with the internals in order to successfully use the package for
your analyses.</p>
<p>If you contribute code to {gsDesign2}, you may need to write
different logic based on the characteristics of the trial design. Given
the general overview above, below are the practical steps for querying a
design object.</p>
<p>To determine if it is a fixed or group sequential design, use
<code><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">inherits</span>(x, <span class="st">"gs_design"</span>)) {</span></code></pre></div>
<p>To determine the testing method, query the list element
<code>design</code>. You can use nested if-else statements or
<code><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">design</span> <span class="op">==</span> <span class="st">"ahr"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># code for ahr designs</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">design</span> <span class="op">==</span> <span class="st">"wlr"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># code for wlr designs</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">design</span> <span class="op">==</span> <span class="st">"rd"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># code for rd designs</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="co"># something else</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">design</span>, ahr <span class="op">=</span> <span class="fl">1</span>, wlr <span class="op">=</span> <span class="fl">2</span>, rd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>To determine if the futility is binding, query the attribute
<code>binding</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"binding"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># code for design with binding futility bound</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="co"># code for design with non-binding futility bound</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson, Yujie Zhao, Yilong Zhang, John Blischak, Yihui Xie, Nan Xiao, Jianxiao Yang. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0. <br>Copyright © 2025 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p><span></span></p>
</div>

    </footer>
</div>





  </body>
</html>
