<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gsDesign2">
<title>Design using average hazard ratio • gsDesign2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Design using average hazard ratio">
<meta property="og:description" content="gsDesign2">
<meta property="og:image" content="https://merck.github.io/gsDesign2/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gsDesign2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/gsDesign2.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Merck/gsDesign2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Design using average hazard ratio</h1>
                        <h4 data-toc-skip class="author">Keaven M.
Anderson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Merck/gsDesign2/blob/HEAD/vignettes/articles/story-design-with-ahr.Rmd" class="external-link"><code>vignettes/articles/story-design-with-ahr.Rmd</code></a></small>
      <div class="d-none name"><code>story-design-with-ahr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>We consider fixed and group sequential design under non-proportional
hazards when testing with the logrank test. We focus primarily on the
average hazard ratio approach, expanding the asymptotic approach of
<span class="citation">Mukhopadhyay et al. (2020)</span> to both group
sequential design and more complex enrollment assumptions. The
theoretical background for this is provided in other vignettes in this
package. We provide a few basic examples along the lines of <span class="citation">Lin et al. (2020)</span> for illustration of design
considerations under the following assumptions:</p>
<ol style="list-style-type: decimal">
<li>Proportional hazards</li>
<li>Short delayed effect</li>
<li>Longer delayed effect</li>
<li>Crossing survival</li>
</ol>
<p>Illustrations include</p>
<ol style="list-style-type: decimal">
<li>Expected average hazard ratio (AHR) over time.</li>
<li>Expected event accumulation over time.</li>
<li>The impact of planned study duration on required number of
events.</li>
<li>Power across scenarios when a trial is designed under the assumption
of a short delayed effect.</li>
<li>Timing of interim analyses.</li>
<li>
<span class="math inline">\(\alpha\)</span>-spending
considerations.</li>
</ol>
<p>We focus on results rather than code, but hidden code can be revealed
for all examples.</p>
</div>
<div class="section level2">
<h2 id="packages-used">Packages used<a class="anchor" aria-label="anchor" href="#packages-used"></a>
</h2>
<p>The primary packages needed is <strong>gsDesign2</strong>. Other
packages used are supportive.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://keaven.github.io/gsDesign/" class="external-link">gsDesign</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsDesign2/">gsDesign2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scenarios">Scenarios<a class="anchor" aria-label="anchor" href="#scenarios"></a>
</h2>
<p>Expected enrollment duration is 18 months with piecewise constant
enrollment rates escalating every 2 months until month 6 where
enrollment is assumed to have reached steady state. We will later assume
a similar ramp-up period with 24 months expected enrollment
duration.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set the enrollment table of totally 24 month</span></span>
<span><span class="va">enroll24</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_enroll_rate.html">define_enroll_rate</a></span><span class="op">(</span></span>
<span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fl">18</span><span class="op">)</span>, <span class="co"># 6 month ramp-up of enrollment, 24 months enrollment time target</span></span>
<span>  rate <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="co"># ratio of the enrollment rate</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Adjust enrollment rates to enroll 100 subjects</span></span>
<span><span class="va">enroll24</span><span class="op">$</span><span class="va">rate</span> <span class="op">&lt;-</span> <span class="va">enroll24</span><span class="op">$</span><span class="va">rate</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">enroll24</span><span class="op">$</span><span class="va">duration</span> <span class="op">*</span> <span class="va">enroll24</span><span class="op">$</span><span class="va">rate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set the enrollment table for 18 month expected enrollment</span></span>
<span><span class="va">enroll18</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_enroll_rate.html">define_enroll_rate</a></span><span class="op">(</span></span>
<span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fl">12</span><span class="op">)</span>, <span class="co"># 6 month ramp-up of enrollment, 18 months enrollment time target</span></span>
<span>  rate <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="co"># ratio of the enrollment rate</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Adjust enrollment rates to enroll 100 subjects</span></span>
<span><span class="va">enroll18</span><span class="op">$</span><span class="va">rate</span> <span class="op">&lt;-</span> <span class="va">enroll18</span><span class="op">$</span><span class="va">rate</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">enroll18</span><span class="op">$</span><span class="va">duration</span> <span class="op">*</span> <span class="va">enroll18</span><span class="op">$</span><span class="va">rate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Put these in a single tibble by scenario</span></span>
<span><span class="co"># We will use 18 month enrollment for delayed effect and crossing hazards scenarios</span></span>
<span><span class="va">enroll_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">enroll18</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="st">"PH"</span><span class="op">)</span>,</span>
<span>  <span class="va">enroll18</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="st">"Shorter delayed effect"</span><span class="op">)</span>,</span>
<span>  <span class="va">enroll18</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="st">"Longer delayed effect"</span><span class="op">)</span>,</span>
<span>  <span class="va">enroll18</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="st">"Crossing"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We will consider the following failure rate assumptions:</p>
<ul>
<li>PH: Proportional hazards is assumed.
<ul>
<li>Control group has exponential failure rate with a median of 14
months.</li>
<li>Constant hazard ratio of 0.7 (experimental/control).</li>
</ul>
</li>
<li>Shorter delayed effect
<ul>
<li>Control group has exponential failure rate with a median of 10
months.</li>
<li>Hazard ratio of 1 for 6 months followed by a hazard ratio of
0.6.</li>
</ul>
</li>
<li>Longer delayed effect
<ul>
<li>Control group has exponential failure rate with a median of 10
months.</li>
<li>Hazard ratio of 1 for 6 months followed by a hazard ratio of
0.6.</li>
</ul>
</li>
<li>Crossing hazards
<ul>
<li>Control group has exponential failure rate with a median of 10
months.</li>
<li>Hazard ratio of 1.5 for 4 months followed by a hazard ratio of
0.5.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">44</span><span class="op">)</span></span>
<span><span class="va">duration</span> <span class="op">&lt;-</span> <span class="va">month</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">month</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">control_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Delayed effect"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Crossing"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Control"</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>  Month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">month</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">duration</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  rate <span class="op">=</span> <span class="va">control_rate</span>,</span>
<span>  hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">.575</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">.5</span>, <span class="fl">.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">s</span>,</span>
<span>  <span class="va">s</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="st">"Experimental"</span>, rate <span class="op">=</span> <span class="va">rate</span> <span class="op">*</span> <span class="va">hr</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Scenario</span>, <span class="va">Treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Survival <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">duration</span> <span class="op">*</span> <span class="va">rate</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">s</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Month</span>, y <span class="op">=</span> <span class="va">Survival</span>, col <span class="op">=</span> <span class="va">Scenario</span>, lty <span class="op">=</span> <span class="va">Treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span>, lim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">42</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="story-design-with-ahr_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get 4 scenarios</span></span>
<span><span class="va">control_median</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">12</span>, <span class="fl">12</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">month</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">44</span><span class="op">)</span></span>
<span><span class="va">duration</span> <span class="op">&lt;-</span> <span class="va">month</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">month</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co"># HR by time period for each scenario</span></span>
<span><span class="va">hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># constant hazard ratio of 0.7</span></span>
<span>  <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">.6</span>, <span class="fl">.6</span>, <span class="co"># hazard ratio of 1 for 4 months followed by a hazard ratio of 0.6.</span></span>
<span>  <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">.6</span>, <span class="co"># hr = 1 for 6 months followed by hr = .6</span></span>
<span>  <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">.5</span>, <span class="fl">.5</span></span>
<span><span class="op">)</span> <span class="co"># hazard ratio of 1.5 for 4 months followed by a hazard ratio of 0.5.</span></span></code></pre></div>
<p>The survival curves for these 4 scenarios are shown below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Put parameters together in a tibble</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Shorter delayed effect"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Longer delayed effect"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Crossing"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Control"</span>, <span class="fl">16</span><span class="op">)</span>,</span>
<span>  Month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">month</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># Periods for constant HR</span></span>
<span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">duration</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">control_median</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">control_median</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">control_median</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">control_median</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, <span class="fl">4</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  hr <span class="op">=</span> <span class="va">hr</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the survival at each change point for each scenario</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">s</span>,</span>
<span>  <span class="va">s</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="st">"Experimental"</span>, rate <span class="op">=</span> <span class="va">rate</span> <span class="op">*</span> <span class="va">hr</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Scenario</span>, <span class="va">Treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Survival <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">duration</span> <span class="op">*</span> <span class="va">rate</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot the survival curve</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">s</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Month</span>, y <span class="op">=</span> <span class="va">Survival</span>, col <span class="op">=</span> <span class="va">Scenario</span>, lty <span class="op">=</span> <span class="va">Treatment</span>, shape <span class="op">=</span> <span class="va">Treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">18</span>, y <span class="op">=</span> <span class="fl">.1</span>, label <span class="op">=</span> <span class="st">"Control for scenarios other than PH have same survival"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span>, lim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.07</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">42</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Survival over time for 4 scenarios studied"</span><span class="op">)</span></span></code></pre></div>
<p><img src="story-design-with-ahr_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>The average hazard ratio for these 4 scenarios are shown below. We
note that under the <em>Shorter delayed effect</em> scenario, the
average hazard ratio approaches that of the <em>PH</em> scenario after a
study duration of about 36 months.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Durations to be used in common for all failure rate scenarios</span></span>
<span><span class="va">dur</span> <span class="op">&lt;-</span> <span class="va">month</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">-</span> <span class="va">month</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Set the failure table</span></span>
<span><span class="co"># We use exponential failure, proportional hazards</span></span>
<span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    Scenario <span class="op">=</span> <span class="st">"PH"</span>, stratum <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>    duration <span class="op">=</span> <span class="va">dur</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">14</span>,</span>
<span>    hr <span class="op">=</span> <span class="va">hr</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, dropout_rate <span class="op">=</span> <span class="fl">.001</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    Scenario <span class="op">=</span> <span class="st">"Shorter delayed effect"</span>, stratum <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>    duration <span class="op">=</span> <span class="va">dur</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">11</span>,</span>
<span>    hr <span class="op">=</span> <span class="va">hr</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, dropout_rate <span class="op">=</span> <span class="fl">.001</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    Scenario <span class="op">=</span> <span class="st">"Longer delayed effect"</span>, stratum <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>    duration <span class="op">=</span> <span class="va">dur</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">11</span>,</span>
<span>    hr <span class="op">=</span> <span class="va">hr</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span>, dropout_rate <span class="op">=</span> <span class="fl">.001</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    Scenario <span class="op">=</span> <span class="st">"Crossing"</span>, stratum <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>    duration <span class="op">=</span> <span class="va">dur</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">11</span>,</span>
<span>    hr <span class="op">=</span> <span class="va">hr</span><span class="op">[</span><span class="fl">14</span><span class="op">:</span><span class="fl">16</span><span class="op">]</span>, dropout_rate <span class="op">=</span> <span class="fl">.001</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/ahr.html">ahr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        total_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.001</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">44</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hr</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">ahr</span>, col <span class="op">=</span> <span class="va">Scenario</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">42</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Average hazard ratio (AHR) by study duration"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Under the 4 scenarios examined"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="story-design-with-ahr_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>The number of events for these 4 scenarios are shown below. Under the
3 NPH scenarios events accumulate faster than under the PH scenario both
due to a lower control median and/or a delayed effect.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hr</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">event</span>, col <span class="op">=</span> <span class="va">Scenario</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">42</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Expected events per 100 enrolled"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Expected event accumulation under the 4 scenarios studied"</span><span class="op">)</span></span></code></pre></div>
<p><img src="story-design-with-ahr_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>From the above, we see that slight variations in control failure
rates and the potential for a delayed effect can substantially
accelerate the accumulation of events. If doing an event-based cutoff
for analysis these slight variations can lead to earlier analyses than
anticipated when the average hazard ratio that is expected with longer
follow-up would never be achieved. We examine the implications further
below.</p>
</div>
<div class="section level2">
<h2 id="sample-size-and-events-by-scenarios">Sample Size and Events by Scenarios<a class="anchor" aria-label="anchor" href="#sample-size-and-events-by-scenarios"></a>
</h2>
<div class="section level3">
<h3 id="fixed-design-using-ahr-and-logrank">Fixed Design using AHR and Logrank<a class="anchor" aria-label="anchor" href="#fixed-design-using-ahr-and-logrank"></a>
</h3>
<p>We power a fixed design at 90% with 2.5% one-sided Type I error under
the different scenarios under consideration. We now assume the 18 month
enrollment pattern for all scenarios. For the <em>PH</em> and
<em>Shorter delayed effect</em> scenarios we need a similar AHR, number
of events and sample size for a 36 month study. The other two scenarios
with crossing survival curves or a large effect delay would require
substantially larger sample sizes due to not achieving a similar AHR by
month 36.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ss_ahr_fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">xx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        analysis_time <span class="op">=</span> <span class="fl">36</span>,</span>
<span>        upper <span class="op">=</span> <span class="va">gs_b</span>,</span>
<span>        upar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span>,</span>
<span>        lower <span class="op">=</span> <span class="va">gs_b</span>,</span>
<span>        lpar <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>        alpha <span class="op">=</span> <span class="fl">.025</span>,</span>
<span>        beta <span class="op">=</span> <span class="fl">.1</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="va">ans</span> <span class="op">&lt;-</span> <span class="va">xx</span><span class="op">$</span><span class="va">analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">n</span>, <span class="va">event</span>, <span class="va">ahr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ans</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ss_ahr_fixed</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, decimals <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">4</span>, decimals <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Sample Size and Events Required by Scenario"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"36 Month Trial duration, 2.5% One-sided Type 1 Error, 90% Power"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="mnipdbgcnq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mnipdbgcnq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mnipdbgcnq thead, #mnipdbgcnq tbody, #mnipdbgcnq tfoot, #mnipdbgcnq tr, #mnipdbgcnq td, #mnipdbgcnq th {
  border-style: none;
}

#mnipdbgcnq p {
  margin: 0;
  padding: 0;
}

#mnipdbgcnq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mnipdbgcnq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mnipdbgcnq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mnipdbgcnq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mnipdbgcnq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mnipdbgcnq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnipdbgcnq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mnipdbgcnq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mnipdbgcnq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mnipdbgcnq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mnipdbgcnq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mnipdbgcnq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mnipdbgcnq .gt_spanner_row {
  border-bottom-style: hidden;
}

#mnipdbgcnq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mnipdbgcnq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mnipdbgcnq .gt_from_md > :first-child {
  margin-top: 0;
}

#mnipdbgcnq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mnipdbgcnq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mnipdbgcnq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mnipdbgcnq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mnipdbgcnq .gt_row_group_first td {
  border-top-width: 2px;
}

#mnipdbgcnq .gt_row_group_first th {
  border-top-width: 2px;
}

#mnipdbgcnq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnipdbgcnq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mnipdbgcnq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mnipdbgcnq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnipdbgcnq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnipdbgcnq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mnipdbgcnq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mnipdbgcnq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mnipdbgcnq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnipdbgcnq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mnipdbgcnq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnipdbgcnq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mnipdbgcnq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnipdbgcnq .gt_left {
  text-align: left;
}

#mnipdbgcnq .gt_center {
  text-align: center;
}

#mnipdbgcnq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mnipdbgcnq .gt_font_normal {
  font-weight: normal;
}

#mnipdbgcnq .gt_font_bold {
  font-weight: bold;
}

#mnipdbgcnq .gt_font_italic {
  font-style: italic;
}

#mnipdbgcnq .gt_super {
  font-size: 65%;
}

#mnipdbgcnq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mnipdbgcnq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mnipdbgcnq .gt_indent_1 {
  text-indent: 5px;
}

#mnipdbgcnq .gt_indent_2 {
  text-indent: 10px;
}

#mnipdbgcnq .gt_indent_3 {
  text-indent: 15px;
}

#mnipdbgcnq .gt_indent_4 {
  text-indent: 20px;
}

#mnipdbgcnq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="5" class="gt_heading gt_title gt_font_normal" style>Sample Size and Events Required by Scenario</td>
    </tr>
<tr class="gt_heading">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>36 Month Trial duration, 2.5% One-sided Type 1 Error, 90% Power</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="time">time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="event">event</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ahr">ahr</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Scenario">Scenario</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">518</td>
<td headers="event" class="gt_row gt_right">332</td>
<td headers="ahr" class="gt_row gt_right">0.700</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">476</td>
<td headers="event" class="gt_row gt_right">341</td>
<td headers="ahr" class="gt_row gt_right">0.703</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">696</td>
<td headers="event" class="gt_row gt_right">504</td>
<td headers="ahr" class="gt_row gt_right">0.749</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">760</td>
<td headers="event" class="gt_row gt_right">544</td>
<td headers="ahr" class="gt_row gt_right">0.755</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
</tbody>
</table>
</div>
<p>Assuming the shorter delayed effect is the primary scenario for which
we wish to protect power, how long should the trial be to optimize the
tradeoffs between sample size, AHR and events required? We will inform
this tradeoff by looking sizing the trial for different assumed trial
durations with the same failure rates and assumed relative enrollment
rates. The counts of events required is perhaps the most interesting
here in that a 24 month trial requires almost twice the events to be
powered at 90% compared to a trial of 42 months duration. For further
study, we will consider the 36 month trial duration as a reasonable
tradeoff between time, sample size and power under a presumed delayed
effect of 4 months followed by a hazard ratio of 0.6 thereafter.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">30</span>, <span class="fl">36</span>, <span class="fl">42</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ans</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="st">"Shorter delayed effect"</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="st">"Shorter delayed effect"</span><span class="op">)</span>,</span>
<span>        analysis_time <span class="op">=</span> <span class="va">x</span>,</span>
<span>        upper <span class="op">=</span> <span class="va">gs_b</span>, upar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span>,</span>
<span>        lower <span class="op">=</span> <span class="va">gs_b</span>, lpar <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>        alpha <span class="op">=</span> <span class="fl">.025</span>,</span>
<span>        beta <span class="op">=</span> <span class="fl">.1</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">n</span>, <span class="va">event</span>, <span class="va">ahr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="st">"Shorter delayed effect"</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ans</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, decimals <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">4</span>, decimals <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Sample Size and Events Required by Trial Duration"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Delayed Effect of 4 Months, HR = 0.6 Thereafter; 90% Power"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div id="ceyejoayzd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ceyejoayzd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ceyejoayzd thead, #ceyejoayzd tbody, #ceyejoayzd tfoot, #ceyejoayzd tr, #ceyejoayzd td, #ceyejoayzd th {
  border-style: none;
}

#ceyejoayzd p {
  margin: 0;
  padding: 0;
}

#ceyejoayzd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ceyejoayzd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ceyejoayzd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ceyejoayzd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ceyejoayzd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ceyejoayzd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ceyejoayzd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ceyejoayzd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ceyejoayzd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ceyejoayzd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ceyejoayzd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ceyejoayzd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ceyejoayzd .gt_spanner_row {
  border-bottom-style: hidden;
}

#ceyejoayzd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ceyejoayzd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ceyejoayzd .gt_from_md > :first-child {
  margin-top: 0;
}

#ceyejoayzd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ceyejoayzd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ceyejoayzd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ceyejoayzd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ceyejoayzd .gt_row_group_first td {
  border-top-width: 2px;
}

#ceyejoayzd .gt_row_group_first th {
  border-top-width: 2px;
}

#ceyejoayzd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ceyejoayzd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ceyejoayzd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ceyejoayzd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ceyejoayzd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ceyejoayzd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ceyejoayzd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ceyejoayzd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ceyejoayzd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ceyejoayzd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ceyejoayzd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ceyejoayzd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ceyejoayzd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ceyejoayzd .gt_left {
  text-align: left;
}

#ceyejoayzd .gt_center {
  text-align: center;
}

#ceyejoayzd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ceyejoayzd .gt_font_normal {
  font-weight: normal;
}

#ceyejoayzd .gt_font_bold {
  font-weight: bold;
}

#ceyejoayzd .gt_font_italic {
  font-style: italic;
}

#ceyejoayzd .gt_super {
  font-size: 65%;
}

#ceyejoayzd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ceyejoayzd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ceyejoayzd .gt_indent_1 {
  text-indent: 5px;
}

#ceyejoayzd .gt_indent_2 {
  text-indent: 10px;
}

#ceyejoayzd .gt_indent_3 {
  text-indent: 15px;
}

#ceyejoayzd .gt_indent_4 {
  text-indent: 20px;
}

#ceyejoayzd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="5" class="gt_heading gt_title gt_font_normal" style>Sample Size and Events Required by Trial Duration</td>
    </tr>
<tr class="gt_heading">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Delayed Effect of 4 Months, HR = 0.6 Thereafter; 90% Power</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="time">time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="event">event</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ahr">ahr</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Scenario">Scenario</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="time" class="gt_row gt_right">24</td>
<td headers="n" class="gt_row gt_right">1,037</td>
<td headers="event" class="gt_row gt_right">522</td>
<td headers="ahr" class="gt_row gt_right">0.752</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">30</td>
<td headers="n" class="gt_row gt_right">623</td>
<td headers="event" class="gt_row gt_right">390</td>
<td headers="ahr" class="gt_row gt_right">0.719</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">476</td>
<td headers="event" class="gt_row gt_right">341</td>
<td headers="ahr" class="gt_row gt_right">0.703</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">42</td>
<td headers="n" class="gt_row gt_right">404</td>
<td headers="event" class="gt_row gt_right">316</td>
<td headers="ahr" class="gt_row gt_right">0.694</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="alternate-hypothesis-mapping">Alternate Hypothesis Mapping<a class="anchor" aria-label="anchor" href="#alternate-hypothesis-mapping"></a>
</h3>
<p>Under the different scenarios of interest, we can examine the
expected number of events in time periods of interest.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">events_by_time_period</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">g</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">events_by_time_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>    <span class="va">events_by_time_period</span>,</span>
<span>    <span class="fu"><a href="../reference/pw_info.html">pw_info</a></span><span class="op">(</span></span>
<span>      enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">g</span><span class="op">)</span>,</span>
<span>      fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">g</span><span class="op">)</span>,</span>
<span>      total_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">20</span>, <span class="fl">28</span>, <span class="fl">36</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<p>Recall that our alternate hypothesis assumes no treatment effect
(HR=1) for 4 months and then HR = 0.6 thereafter. For any of the above
scenarios, if we wish to base a futility bound on this assumption plus
the above number of events in the first 4 months and after 4 months,
then we can compute the average hazard ratio under the alternate hazard
ratio for each scenario at 20 months as follows. You can see that an
interim futility spending bound based on the alternate hypothesis can
depend fairly heavily on enrollment and the control failure rate. Note
also that at the time of interim analysis, the alternate hypothesis AHR
can be computed in this same fashion based on observed events by time
period. Note that this can be quite different than the scenario HR;
e.g., for PH, we assume HR=0.7 throughout, but for the futility bound
comparison, we compute blinded AHR that decreases with each analysis
under the alternate hypothesis.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Time periods for each scenario were 0-4, 4-6, and 6+</span></span>
<span><span class="co"># Thus H1 has HR as follows</span></span>
<span><span class="va">hr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>, hr1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.6</span>, <span class="fl">.6</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ahr_by_analysis</span> <span class="op">&lt;-</span> <span class="va">events_by_time_period</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">hr1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Scenario</span>, <span class="va">time</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>AHR1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">event</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">hr1</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">event</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ahr_by_analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Scenario</span>, values_from <span class="op">=</span> <span class="va">AHR1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, decimals <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div id="yninnvlozf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yninnvlozf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#yninnvlozf thead, #yninnvlozf tbody, #yninnvlozf tfoot, #yninnvlozf tr, #yninnvlozf td, #yninnvlozf th {
  border-style: none;
}

#yninnvlozf p {
  margin: 0;
  padding: 0;
}

#yninnvlozf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yninnvlozf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#yninnvlozf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yninnvlozf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yninnvlozf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yninnvlozf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yninnvlozf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yninnvlozf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yninnvlozf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yninnvlozf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yninnvlozf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yninnvlozf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yninnvlozf .gt_spanner_row {
  border-bottom-style: hidden;
}

#yninnvlozf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#yninnvlozf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yninnvlozf .gt_from_md > :first-child {
  margin-top: 0;
}

#yninnvlozf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yninnvlozf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yninnvlozf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#yninnvlozf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#yninnvlozf .gt_row_group_first td {
  border-top-width: 2px;
}

#yninnvlozf .gt_row_group_first th {
  border-top-width: 2px;
}

#yninnvlozf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yninnvlozf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#yninnvlozf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#yninnvlozf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yninnvlozf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yninnvlozf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yninnvlozf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#yninnvlozf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yninnvlozf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yninnvlozf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yninnvlozf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yninnvlozf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yninnvlozf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yninnvlozf .gt_left {
  text-align: left;
}

#yninnvlozf .gt_center {
  text-align: center;
}

#yninnvlozf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yninnvlozf .gt_font_normal {
  font-weight: normal;
}

#yninnvlozf .gt_font_bold {
  font-weight: bold;
}

#yninnvlozf .gt_font_italic {
  font-style: italic;
}

#yninnvlozf .gt_super {
  font-size: 65%;
}

#yninnvlozf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#yninnvlozf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#yninnvlozf .gt_indent_1 {
  text-indent: 5px;
}

#yninnvlozf .gt_indent_2 {
  text-indent: 10px;
}

#yninnvlozf .gt_indent_3 {
  text-indent: 15px;
}

#yninnvlozf .gt_indent_4 {
  text-indent: 20px;
}

#yninnvlozf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="time">time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Crossing">Crossing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Longer delayed effect">Longer delayed effect</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="PH">PH</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Shorter delayed effect">Shorter delayed effect</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="time" class="gt_row gt_right">12</td>
<td headers="Crossing" class="gt_row gt_right">0.904</td>
<td headers="Longer delayed effect" class="gt_row gt_right">0.949</td>
<td headers="PH" class="gt_row gt_right">1.000</td>
<td headers="Shorter delayed effect" class="gt_row gt_right">0.881</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">20</td>
<td headers="Crossing" class="gt_row gt_right">0.822</td>
<td headers="Longer delayed effect" class="gt_row gt_right">0.862</td>
<td headers="PH" class="gt_row gt_right">1.000</td>
<td headers="Shorter delayed effect" class="gt_row gt_right">0.793</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">28</td>
<td headers="Crossing" class="gt_row gt_right">0.754</td>
<td headers="Longer delayed effect" class="gt_row gt_right">0.784</td>
<td headers="PH" class="gt_row gt_right">1.000</td>
<td headers="Shorter delayed effect" class="gt_row gt_right">0.728</td>
</tr>
<tr>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="Crossing" class="gt_row gt_right">0.727</td>
<td headers="Longer delayed effect" class="gt_row gt_right">0.749</td>
<td headers="PH" class="gt_row gt_right">1.000</td>
<td headers="Shorter delayed effect" class="gt_row gt_right">0.703</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="group-sequential-design">Group Sequential Design<a class="anchor" aria-label="anchor" href="#group-sequential-design"></a>
</h3>
<p>Here we assume the design is under a delayed effect model where the
delay is not too long and the long-term average hazard ratio benefit is
strong. proportional hazards scenario, but we look at power under the
alternate scenarios. We will plan a 36 month group sequential design
under the Shorter delayed effect scenario. Interim analyses are planned
after 12, 20, and 28 months.</p>
<div class="section level4">
<h4 id="ahr-method">AHR method<a class="anchor" aria-label="anchor" href="#ahr-method"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">20</span>, <span class="fl">28</span>, <span class="fl">36</span><span class="op">)</span></span>
<span><span class="va">upar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfLDOF.html" class="external-link">sfLDOF</a></span>, total_spend <span class="op">=</span> <span class="fl">0.025</span>, param <span class="op">=</span> <span class="cn">NULL</span>, timing <span class="op">=</span> <span class="cn">NULL</span>, theta <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">lpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sf <span class="op">=</span> <span class="fu">gsDesign</span><span class="fu">::</span><span class="va"><a href="https://keaven.github.io/gsDesign/reference/sfHSD.html" class="external-link">sfHSD</a></span>, total_spend <span class="op">=</span> <span class="fl">.1</span>, param <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>, timing <span class="op">=</span> <span class="cn">NULL</span>, theta <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nph_asymmetric</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span></span>
<span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span>
<span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">.025</span>, beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  <span class="co"># Information fraction not required (but available!)</span></span>
<span>  analysis_time <span class="op">=</span> <span class="va">analysis_time</span>,</span>
<span>  <span class="co"># Function to enable spending bound</span></span>
<span>  upper <span class="op">=</span> <span class="va">gs_spending_bound</span>,</span>
<span>  lower <span class="op">=</span> <span class="va">gs_spending_bound</span>,</span>
<span>  <span class="co"># Spending function and parameters used</span></span>
<span>  upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>  lpar <span class="op">=</span> <span class="va">lpar</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">nph_asymmetric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/as_gt.html">as_gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="cwzosetebp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cwzosetebp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cwzosetebp thead, #cwzosetebp tbody, #cwzosetebp tfoot, #cwzosetebp tr, #cwzosetebp td, #cwzosetebp th {
  border-style: none;
}

#cwzosetebp p {
  margin: 0;
  padding: 0;
}

#cwzosetebp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cwzosetebp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cwzosetebp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cwzosetebp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cwzosetebp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cwzosetebp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cwzosetebp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cwzosetebp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cwzosetebp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cwzosetebp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cwzosetebp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cwzosetebp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cwzosetebp .gt_spanner_row {
  border-bottom-style: hidden;
}

#cwzosetebp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cwzosetebp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cwzosetebp .gt_from_md > :first-child {
  margin-top: 0;
}

#cwzosetebp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cwzosetebp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cwzosetebp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cwzosetebp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cwzosetebp .gt_row_group_first td {
  border-top-width: 2px;
}

#cwzosetebp .gt_row_group_first th {
  border-top-width: 2px;
}

#cwzosetebp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwzosetebp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cwzosetebp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cwzosetebp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cwzosetebp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwzosetebp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cwzosetebp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cwzosetebp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cwzosetebp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cwzosetebp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cwzosetebp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwzosetebp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cwzosetebp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwzosetebp .gt_left {
  text-align: left;
}

#cwzosetebp .gt_center {
  text-align: center;
}

#cwzosetebp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cwzosetebp .gt_font_normal {
  font-weight: normal;
}

#cwzosetebp .gt_font_bold {
  font-weight: bold;
}

#cwzosetebp .gt_font_italic {
  font-style: italic;
}

#cwzosetebp .gt_super {
  font-size: 65%;
}

#cwzosetebp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cwzosetebp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cwzosetebp .gt_indent_1 {
  text-indent: 5px;
}

#cwzosetebp .gt_indent_2 {
  text-indent: 10px;
}

#cwzosetebp .gt_indent_3 {
  text-indent: 15px;
}

#cwzosetebp .gt_indent_4 {
  text-indent: 20px;
}

#cwzosetebp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_title gt_font_normal" style>Bound summary for AHR design</td>
    </tr>
<tr class="gt_heading">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>AHR approximations of ~HR at bound</td>
    </tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Bound">Bound</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Z">Z</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='Nominal p&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>Nominal p<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id='~HR at bound&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;'>~HR at bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span>
</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Cumulative boundary crossing probability">
        <span class="gt_column_spanner">Cumulative boundary crossing probability</span>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Alternate hypothesis">Alternate hypothesis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Null hypothesis">Null hypothesis</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11">Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Z" class="gt_row gt_right">-1.51</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Nominal p" class="gt_row gt_right">0.9350</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  ~HR at bound" class="gt_row gt_right">1.6006</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Alternate hypothesis" class="gt_row gt_right">0.0043</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Null hypothesis" class="gt_row gt_right">0.0650</td>
</tr>
<tr>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Z" class="gt_row gt_right">6.47</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Nominal p" class="gt_row gt_right">0.0000</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  ~HR at bound" class="gt_row gt_right">0.1338</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Alternate hypothesis" class="gt_row gt_right">0.0000</td>
<td headers="Analysis: 1 Time: 12 N: 237.6 Event: 41.4 AHR: 0.7 Information fraction: 0.11  Null hypothesis" class="gt_row gt_right">0.0000</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35">Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">-0.24</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.5942</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">1.0433</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0163</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.4156</td>
</tr>
<tr>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Z" class="gt_row gt_right">3.59</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Nominal p" class="gt_row gt_right">0.0002</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  ~HR at bound" class="gt_row gt_right">0.5286</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Alternate hypothesis" class="gt_row gt_right">0.0549</td>
<td headers="Analysis: 2 Time: 20 N: 409.2 Event: 126.6 AHR: 0.7 Information fraction: 0.35  Null hypothesis" class="gt_row gt_right">0.0002</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64">Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Z" class="gt_row gt_right">0.81</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Nominal p" class="gt_row gt_right">0.2090</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  ~HR at bound" class="gt_row gt_right">0.8982</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Alternate hypothesis" class="gt_row gt_right">0.0405</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Null hypothesis" class="gt_row gt_right">0.8017</td>
</tr>
<tr>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Z" class="gt_row gt_right">2.58</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Nominal p" class="gt_row gt_right">0.0050</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  ~HR at bound" class="gt_row gt_right">0.7105</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Alternate hypothesis" class="gt_row gt_right">0.5361</td>
<td headers="Analysis: 3 Time: 28 N: 580.8 Event: 227.6 AHR: 0.7 Information fraction: 0.64  Null hypothesis" class="gt_row gt_right">0.0050</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1">Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1</th>
    </tr>
<tr class="gt_row_group_first">
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Futility</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.99</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0234</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.8102</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.1002</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">0.9766</td>
</tr>
<tr>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Bound" class="gt_row gt_left">Efficacy</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Z" class="gt_row gt_right">1.99</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Nominal p" class="gt_row gt_right">0.0234</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  ~HR at bound" class="gt_row gt_right">0.8102</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Alternate hypothesis" class="gt_row gt_right">0.9000</td>
<td headers="Analysis: 4 Time: 36 N: 791.9 Event: 356.7 AHR: 0.7 Information fraction: 1  Null hypothesis" class="gt_row gt_right">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> 0.0234</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> One-sided p-value for experimental vs control treatment.
          Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="6">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>3</sup></span> Cumulative alpha for final analysis (0.0234) is less than the full alpha (0.025) when the futility bound is non-binding. The smaller value subtracts the probability of crossing a futility bound before crossing an efficacy bound at a later analysis (0.025 - 0.0016 = 0.0234) under the null hypothesis.</td>
    </tr>
</tfoot>
</table>
</div>
<p>By scenario, we now wish to compute the adjusted expected futility
bounds and the power implied.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ahr1</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">ahr_by_analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">AHR1</span></span>
<span></span>
<span>      <span class="va">lparx</span> <span class="op">&lt;-</span> <span class="va">lpar</span></span>
<span>      <span class="va">lparx</span><span class="op">$</span><span class="va">theta1</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">ahr1</span><span class="op">)</span></span>
<span></span>
<span>      <span class="va">yy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gs_power_ahr.html">gs_power_ahr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        event <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        analysis_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">20</span>, <span class="fl">28</span>, <span class="fl">36</span><span class="op">)</span>,</span>
<span>        upper <span class="op">=</span> <span class="va">gs_spending_bound</span>,</span>
<span>        upar <span class="op">=</span> <span class="va">upar</span>,</span>
<span>        lower <span class="op">=</span> <span class="va">gs_spending_bound</span>,</span>
<span>        lpar <span class="op">=</span> <span class="va">lparx</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="st">"event"</span>, decimals <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">10</span>, decimals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div id="wrzhvumpld" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wrzhvumpld table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wrzhvumpld thead, #wrzhvumpld tbody, #wrzhvumpld tfoot, #wrzhvumpld tr, #wrzhvumpld td, #wrzhvumpld th {
  border-style: none;
}

#wrzhvumpld p {
  margin: 0;
  padding: 0;
}

#wrzhvumpld .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wrzhvumpld .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wrzhvumpld .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wrzhvumpld .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wrzhvumpld .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrzhvumpld .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrzhvumpld .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrzhvumpld .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wrzhvumpld .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wrzhvumpld .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wrzhvumpld .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wrzhvumpld .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wrzhvumpld .gt_spanner_row {
  border-bottom-style: hidden;
}

#wrzhvumpld .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wrzhvumpld .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wrzhvumpld .gt_from_md > :first-child {
  margin-top: 0;
}

#wrzhvumpld .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wrzhvumpld .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wrzhvumpld .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wrzhvumpld .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wrzhvumpld .gt_row_group_first td {
  border-top-width: 2px;
}

#wrzhvumpld .gt_row_group_first th {
  border-top-width: 2px;
}

#wrzhvumpld .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrzhvumpld .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wrzhvumpld .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wrzhvumpld .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrzhvumpld .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrzhvumpld .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wrzhvumpld .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wrzhvumpld .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wrzhvumpld .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrzhvumpld .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrzhvumpld .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrzhvumpld .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrzhvumpld .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrzhvumpld .gt_left {
  text-align: left;
}

#wrzhvumpld .gt_center {
  text-align: center;
}

#wrzhvumpld .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wrzhvumpld .gt_font_normal {
  font-weight: normal;
}

#wrzhvumpld .gt_font_bold {
  font-weight: bold;
}

#wrzhvumpld .gt_font_italic {
  font-style: italic;
}

#wrzhvumpld .gt_super {
  font-size: 65%;
}

#wrzhvumpld .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wrzhvumpld .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wrzhvumpld .gt_indent_1 {
  text-indent: 5px;
}

#wrzhvumpld .gt_indent_2 {
  text-indent: 10px;
}

#wrzhvumpld .gt_indent_3 {
  text-indent: 15px;
}

#wrzhvumpld .gt_indent_4 {
  text-indent: 20px;
}

#wrzhvumpld .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="analysis">analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="time">time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="event">event</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ahr">ahr</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="theta">theta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info">info</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info0">info0</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info_frac">info_frac</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info_frac0">info_frac0</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Scenario">Scenario</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">60</td>
<td headers="event" class="gt_row gt_right">10.5</td>
<td headers="ahr" class="gt_row gt_right">0.7000</td>
<td headers="theta" class="gt_row gt_right">0.3567</td>
<td headers="info" class="gt_row gt_right">2.5533</td>
<td headers="info0" class="gt_row gt_right">2.6161</td>
<td headers="info_frac" class="gt_row gt_right">0.1611</td>
<td headers="info_frac0" class="gt_row gt_right">0.1632</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">2</td>
<td headers="time" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">31.8</td>
<td headers="ahr" class="gt_row gt_right">0.7000</td>
<td headers="theta" class="gt_row gt_right">0.3567</td>
<td headers="info" class="gt_row gt_right">7.7993</td>
<td headers="info0" class="gt_row gt_right">7.9576</td>
<td headers="info_frac" class="gt_row gt_right">0.4922</td>
<td headers="info_frac0" class="gt_row gt_right">0.4964</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">3</td>
<td headers="time" class="gt_row gt_right">28</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">50.8</td>
<td headers="ahr" class="gt_row gt_right">0.7000</td>
<td headers="theta" class="gt_row gt_right">0.3567</td>
<td headers="info" class="gt_row gt_right">12.4964</td>
<td headers="info0" class="gt_row gt_right">12.6892</td>
<td headers="info_frac" class="gt_row gt_right">0.7887</td>
<td headers="info_frac0" class="gt_row gt_right">0.7916</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">4</td>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">64.1</td>
<td headers="ahr" class="gt_row gt_right">0.7000</td>
<td headers="theta" class="gt_row gt_right">0.3567</td>
<td headers="info" class="gt_row gt_right">15.8446</td>
<td headers="info0" class="gt_row gt_right">16.0303</td>
<td headers="info_frac" class="gt_row gt_right">1.0000</td>
<td headers="info_frac0" class="gt_row gt_right">1.0000</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">60</td>
<td headers="event" class="gt_row gt_right">14.0</td>
<td headers="ahr" class="gt_row gt_right">0.8808</td>
<td headers="theta" class="gt_row gt_right">0.1269</td>
<td headers="info" class="gt_row gt_right">3.4499</td>
<td headers="info0" class="gt_row gt_right">3.4942</td>
<td headers="info_frac" class="gt_row gt_right">0.1957</td>
<td headers="info_frac0" class="gt_row gt_right">0.1952</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">2</td>
<td headers="time" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">39.5</td>
<td headers="ahr" class="gt_row gt_right">0.7929</td>
<td headers="theta" class="gt_row gt_right">0.2321</td>
<td headers="info" class="gt_row gt_right">9.6905</td>
<td headers="info0" class="gt_row gt_right">9.8760</td>
<td headers="info_frac" class="gt_row gt_right">0.5497</td>
<td headers="info_frac0" class="gt_row gt_right">0.5518</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">3</td>
<td headers="time" class="gt_row gt_right">28</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">58.9</td>
<td headers="ahr" class="gt_row gt_right">0.7275</td>
<td headers="theta" class="gt_row gt_right">0.3181</td>
<td headers="info" class="gt_row gt_right">14.4480</td>
<td headers="info0" class="gt_row gt_right">14.7332</td>
<td headers="info_frac" class="gt_row gt_right">0.8195</td>
<td headers="info_frac0" class="gt_row gt_right">0.8232</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">4</td>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">71.6</td>
<td headers="ahr" class="gt_row gt_right">0.7032</td>
<td headers="theta" class="gt_row gt_right">0.3522</td>
<td headers="info" class="gt_row gt_right">17.6301</td>
<td headers="info0" class="gt_row gt_right">17.8976</td>
<td headers="info_frac" class="gt_row gt_right">1.0000</td>
<td headers="info_frac0" class="gt_row gt_right">1.0000</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">60</td>
<td headers="event" class="gt_row gt_right">14.4</td>
<td headers="ahr" class="gt_row gt_right">0.9495</td>
<td headers="theta" class="gt_row gt_right">0.0518</td>
<td headers="info" class="gt_row gt_right">3.5860</td>
<td headers="info0" class="gt_row gt_right">3.6055</td>
<td headers="info_frac" class="gt_row gt_right">0.2005</td>
<td headers="info_frac0" class="gt_row gt_right">0.1991</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">2</td>
<td headers="time" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">40.7</td>
<td headers="ahr" class="gt_row gt_right">0.8625</td>
<td headers="theta" class="gt_row gt_right">0.1479</td>
<td headers="info" class="gt_row gt_right">10.0422</td>
<td headers="info0" class="gt_row gt_right">10.1692</td>
<td headers="info_frac" class="gt_row gt_right">0.5615</td>
<td headers="info_frac0" class="gt_row gt_right">0.5614</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">3</td>
<td headers="time" class="gt_row gt_right">28</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">60.1</td>
<td headers="ahr" class="gt_row gt_right">0.7835</td>
<td headers="theta" class="gt_row gt_right">0.2439</td>
<td headers="info" class="gt_row gt_right">14.7861</td>
<td headers="info0" class="gt_row gt_right">15.0221</td>
<td headers="info_frac" class="gt_row gt_right">0.8268</td>
<td headers="info_frac0" class="gt_row gt_right">0.8294</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">4</td>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">72.4</td>
<td headers="ahr" class="gt_row gt_right">0.7487</td>
<td headers="theta" class="gt_row gt_right">0.2895</td>
<td headers="info" class="gt_row gt_right">17.8840</td>
<td headers="info0" class="gt_row gt_right">18.1125</td>
<td headers="info_frac" class="gt_row gt_right">1.0000</td>
<td headers="info_frac0" class="gt_row gt_right">1.0000</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">60</td>
<td headers="event" class="gt_row gt_right">15.8</td>
<td headers="ahr" class="gt_row gt_right">1.2074</td>
<td headers="theta" class="gt_row gt_right">−0.1885</td>
<td headers="info" class="gt_row gt_right">3.7638</td>
<td headers="info0" class="gt_row gt_right">3.9617</td>
<td headers="info_frac" class="gt_row gt_right">0.2226</td>
<td headers="info_frac0" class="gt_row gt_right">0.2215</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">2</td>
<td headers="time" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">42.2</td>
<td headers="ahr" class="gt_row gt_right">0.9844</td>
<td headers="theta" class="gt_row gt_right">0.0157</td>
<td headers="info" class="gt_row gt_right">9.9118</td>
<td headers="info0" class="gt_row gt_right">10.5546</td>
<td headers="info_frac" class="gt_row gt_right">0.5863</td>
<td headers="info_frac0" class="gt_row gt_right">0.5902</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">3</td>
<td headers="time" class="gt_row gt_right">28</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">60.0</td>
<td headers="ahr" class="gt_row gt_right">0.8173</td>
<td headers="theta" class="gt_row gt_right">0.2017</td>
<td headers="info" class="gt_row gt_right">14.0482</td>
<td headers="info0" class="gt_row gt_right">14.9960</td>
<td headers="info_frac" class="gt_row gt_right">0.8310</td>
<td headers="info_frac0" class="gt_row gt_right">0.8385</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">4</td>
<td headers="time" class="gt_row gt_right">36</td>
<td headers="n" class="gt_row gt_right">100</td>
<td headers="event" class="gt_row gt_right">71.5</td>
<td headers="ahr" class="gt_row gt_right">0.7549</td>
<td headers="theta" class="gt_row gt_right">0.2811</td>
<td headers="info" class="gt_row gt_right">16.9053</td>
<td headers="info0" class="gt_row gt_right">17.8842</td>
<td headers="info_frac" class="gt_row gt_right">1.0000</td>
<td headers="info_frac0" class="gt_row gt_right">1.0000</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level4">
<h4 id="weighted-logrank-method">Weighted Logrank Method<a class="anchor" aria-label="anchor" href="#weighted-logrank-method"></a>
</h4>
<p>We investigate two types of the weighting scheme for weight logrank
method.</p>
<p>The fixed design under the first weighting scheme for four scenario
are summarized as follows.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/gs_design_wlr.html">gs_design_wlr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        weight <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">arm0</span>, <span class="va">arm1</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/wlr_weight.html">wlr_weight_fh</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">arm0</span>, <span class="va">arm1</span>, rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span>, tau <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span>        <span class="op">}</span>,</span>
<span>        alpha <span class="op">=</span> <span class="fl">.025</span>,</span>
<span>        beta <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>        upar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span>,</span>
<span>        lpar <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>        analysis_time <span class="op">=</span> <span class="fl">44</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span>, decimals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>The fixed design under the second weighting scheme for four scenario
are summarized as follows.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ignore tau or (tau can be -1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>  <span class="va">rbind</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="st">"Shorter delayed effect"</span>, <span class="st">"Longer delayed effect"</span>, <span class="st">"Crossing"</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/gs_design_wlr.html">gs_design_wlr</a></span><span class="op">(</span></span>
<span>        enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        fail_rate <span class="op">=</span> <span class="va">fail_rate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Scenario</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        weight <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">arm0</span>, <span class="va">arm1</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="fu"><a href="../reference/wlr_weight.html">wlr_weight_fh</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">arm0</span>, <span class="va">arm1</span>, rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>        <span class="op">}</span>,</span>
<span>        alpha <span class="op">=</span> <span class="fl">.025</span>,</span>
<span>        beta <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>        upar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span>,</span>
<span>        lpar <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>        analysis_time <span class="op">=</span> <span class="fl">44</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">analysis</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Scenario <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span>, decimals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span>
<span></span>
<span><span class="co">## Warning in check_fail_rate(fail_rate): Please use `define_fail_rate()` to specify the `fail_rate` argument.</span></span>
<span><span class="co">## We will enforce the requirement from the next version.</span></span></code></pre>
<div id="rxbylvnbaj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rxbylvnbaj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rxbylvnbaj thead, #rxbylvnbaj tbody, #rxbylvnbaj tfoot, #rxbylvnbaj tr, #rxbylvnbaj td, #rxbylvnbaj th {
  border-style: none;
}

#rxbylvnbaj p {
  margin: 0;
  padding: 0;
}

#rxbylvnbaj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rxbylvnbaj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rxbylvnbaj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rxbylvnbaj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rxbylvnbaj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rxbylvnbaj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxbylvnbaj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rxbylvnbaj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rxbylvnbaj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rxbylvnbaj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rxbylvnbaj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rxbylvnbaj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rxbylvnbaj .gt_spanner_row {
  border-bottom-style: hidden;
}

#rxbylvnbaj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rxbylvnbaj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rxbylvnbaj .gt_from_md > :first-child {
  margin-top: 0;
}

#rxbylvnbaj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rxbylvnbaj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rxbylvnbaj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rxbylvnbaj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rxbylvnbaj .gt_row_group_first td {
  border-top-width: 2px;
}

#rxbylvnbaj .gt_row_group_first th {
  border-top-width: 2px;
}

#rxbylvnbaj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxbylvnbaj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rxbylvnbaj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rxbylvnbaj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxbylvnbaj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxbylvnbaj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rxbylvnbaj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rxbylvnbaj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rxbylvnbaj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxbylvnbaj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rxbylvnbaj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxbylvnbaj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rxbylvnbaj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxbylvnbaj .gt_left {
  text-align: left;
}

#rxbylvnbaj .gt_center {
  text-align: center;
}

#rxbylvnbaj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rxbylvnbaj .gt_font_normal {
  font-weight: normal;
}

#rxbylvnbaj .gt_font_bold {
  font-weight: bold;
}

#rxbylvnbaj .gt_font_italic {
  font-style: italic;
}

#rxbylvnbaj .gt_super {
  font-size: 65%;
}

#rxbylvnbaj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rxbylvnbaj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rxbylvnbaj .gt_indent_1 {
  text-indent: 5px;
}

#rxbylvnbaj .gt_indent_2 {
  text-indent: 10px;
}

#rxbylvnbaj .gt_indent_3 {
  text-indent: 15px;
}

#rxbylvnbaj .gt_indent_4 {
  text-indent: 20px;
}

#rxbylvnbaj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="analysis">analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="time">time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="event">event</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ahr">ahr</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="theta">theta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info">info</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info0">info0</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="info_frac">info_frac</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Scenario">Scenario</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">44</td>
<td headers="n" class="gt_row gt_right">490.0869</td>
<td headers="event" class="gt_row gt_right">360.6618</td>
<td headers="ahr" class="gt_row gt_right">0.6974</td>
<td headers="theta" class="gt_row gt_right">0.5587</td>
<td headers="info" class="gt_row gt_right">32.80428</td>
<td headers="info0" class="gt_row gt_right">34.23109</td>
<td headers="info_frac" class="gt_row gt_right">1</td>
<td headers="Scenario" class="gt_row gt_left">PH</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">44</td>
<td headers="n" class="gt_row gt_right">298.0746</td>
<td headers="event" class="gt_row gt_right">238.4018</td>
<td headers="ahr" class="gt_row gt_right">0.6430</td>
<td headers="theta" class="gt_row gt_right">0.6602</td>
<td headers="info" class="gt_row gt_right">23.15996</td>
<td headers="info0" class="gt_row gt_right">24.75957</td>
<td headers="info_frac" class="gt_row gt_right">1</td>
<td headers="Scenario" class="gt_row gt_left">Shorter delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">44</td>
<td headers="n" class="gt_row gt_right">380.2982</td>
<td headers="event" class="gt_row gt_right">306.6089</td>
<td headers="ahr" class="gt_row gt_right">0.6772</td>
<td headers="theta" class="gt_row gt_right">0.5797</td>
<td headers="info" class="gt_row gt_right">30.26797</td>
<td headers="info0" class="gt_row gt_right">31.94557</td>
<td headers="info_frac" class="gt_row gt_right">1</td>
<td headers="Scenario" class="gt_row gt_left">Longer delayed effect</td>
</tr>
<tr>
<td headers="analysis" class="gt_row gt_right">1</td>
<td headers="time" class="gt_row gt_right">44</td>
<td headers="n" class="gt_row gt_right">258.3378</td>
<td headers="event" class="gt_row gt_right">204.8707</td>
<td headers="ahr" class="gt_row gt_right">0.6216</td>
<td headers="theta" class="gt_row gt_right">0.7138</td>
<td headers="info" class="gt_row gt_right">19.76247</td>
<td headers="info0" class="gt_row gt_right">21.21076</td>
<td headers="info_frac" class="gt_row gt_right">1</td>
<td headers="Scenario" class="gt_row gt_left">Crossing</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-lin2020alternative" class="csl-entry">
Lin, Ray S, Ji Lin, Satrajit Roychoudhury, Keaven M Anderson, Tianle Hu,
Bo Huang, Larry F Leon, et al. 2020. <span>“Alternative Analysis Methods
for Time to Event Endpoints Under Nonproportional Hazards: A Comparative
Analysis.”</span> <em>Statistics in Biopharmaceutical Research</em> 12
(2): 187–98.
</div>
<div id="ref-mukhopadhyay2020statistical" class="csl-entry">
Mukhopadhyay, Pralay, Wenmei Huang, Paul Metcalfe, Fredrik Öhrn, Mary
Jenner, and Andrew Stone. 2020. <span>“Statistical and Practical
Considerations in Designing of Immuno-Oncology Trials.”</span>
<em>Journal of Biopharmaceutical Statistics</em> 30 (6): 1130–46.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keaven Anderson, Yilong Zhang, Yujie Zhao, Jianxiao Yang, Nan Xiao. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. <br>Copyright © 2023 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p><span></span></p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
